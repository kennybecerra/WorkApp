!function(e){var t={};function a(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);a(1),a(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e,t,a,n){var s={_positionClasses:["bottom-left","bottom-right","top-right","top-left","bottom-center","top-center","mid-center"],_defaultIcons:["success","error","info","warning"],init:function(t,a){this.prepareOptions(t,e.toast.options),this.process()},prepareOptions:function(t,a){var o={};"string"==typeof t||t instanceof Array?o.text=t:o=t,this.options=e.extend({},a,o)},process:function(){this.setup(),this.addToDom(),this.position(),this.bindToast(),this.animate()},setup:function(){var t="";if(this._toastEl=this._toastEl||e("<div></div>",{class:"jq-toast-single"}),t+='<span class="jq-toast-loader"></span>',this.options.allowToastClose&&(t+='<span class="close-jq-toast-single">&times;</span>'),this.options.text instanceof Array){this.options.heading&&(t+='<h2 class="jq-toast-heading">'+this.options.heading+"</h2>"),t+='<ul class="jq-toast-ul">';for(var a=0;a<this.options.text.length;a++)t+='<li class="jq-toast-li" id="jq-toast-item-'+a+'">'+this.options.text[a]+"</li>";t+="</ul>"}else this.options.heading&&(t+='<h2 class="jq-toast-heading">'+this.options.heading+"</h2>"),t+=this.options.text;this._toastEl.html(t),!1!==this.options.bgColor&&this._toastEl.css("background-color",this.options.bgColor),!1!==this.options.textColor&&this._toastEl.css("color",this.options.textColor),this.options.textAlign&&this._toastEl.css("text-align",this.options.textAlign),!1!==this.options.icon&&(this._toastEl.addClass("jq-has-icon"),-1!==e.inArray(this.options.icon,this._defaultIcons)&&this._toastEl.addClass("jq-icon-"+this.options.icon)),!1!==this.options.class&&this._toastEl.addClass(this.options.class)},position:function(){"string"==typeof this.options.position&&-1!==e.inArray(this.options.position,this._positionClasses)?"bottom-center"===this.options.position?this._container.css({left:e(t).outerWidth()/2-this._container.outerWidth()/2,bottom:20}):"top-center"===this.options.position?this._container.css({left:e(t).outerWidth()/2-this._container.outerWidth()/2,top:20}):"mid-center"===this.options.position?this._container.css({left:e(t).outerWidth()/2-this._container.outerWidth()/2,top:e(t).outerHeight()/2-this._container.outerHeight()/2}):this._container.addClass(this.options.position):"object"===o(this.options.position)?this._container.css({top:this.options.position.top?this.options.position.top:"auto",bottom:this.options.position.bottom?this.options.position.bottom:"auto",left:this.options.position.left?this.options.position.left:"auto",right:this.options.position.right?this.options.position.right:"auto"}):this._container.addClass("bottom-left")},bindToast:function(){var e=this;this._toastEl.on("afterShown",function(){e.processLoader()}),this._toastEl.find(".close-jq-toast-single").on("click",function(t){t.preventDefault(),"fade"===e.options.showHideTransition?(e._toastEl.trigger("beforeHide"),e._toastEl.fadeOut(function(){e._toastEl.trigger("afterHidden")})):"slide"===e.options.showHideTransition?(e._toastEl.trigger("beforeHide"),e._toastEl.slideUp(function(){e._toastEl.trigger("afterHidden")})):(e._toastEl.trigger("beforeHide"),e._toastEl.hide(function(){e._toastEl.trigger("afterHidden")}))}),"function"==typeof this.options.beforeShow&&this._toastEl.on("beforeShow",function(){e.options.beforeShow(e._toastEl)}),"function"==typeof this.options.afterShown&&this._toastEl.on("afterShown",function(){e.options.afterShown(e._toastEl)}),"function"==typeof this.options.beforeHide&&this._toastEl.on("beforeHide",function(){e.options.beforeHide(e._toastEl)}),"function"==typeof this.options.afterHidden&&this._toastEl.on("afterHidden",function(){e.options.afterHidden(e._toastEl)}),"function"==typeof this.options.onClick&&this._toastEl.on("click",function(){e.options.onClick(e._toastEl)})},addToDom:function(){var t=e(".jq-toast-wrap");if(0===t.length?(t=e("<div></div>",{class:"jq-toast-wrap",role:"alert","aria-live":"polite"}),e("body").append(t)):this.options.stack&&!isNaN(parseInt(this.options.stack,10))||t.empty(),t.find(".jq-toast-single:hidden").remove(),t.append(this._toastEl),this.options.stack&&!isNaN(parseInt(this.options.stack),10)){var a=t.find(".jq-toast-single").length-this.options.stack;a>0&&e(".jq-toast-wrap").find(".jq-toast-single").slice(0,a).remove()}this._container=t},canAutoHide:function(){return!1!==this.options.hideAfter&&!isNaN(parseInt(this.options.hideAfter,10))},processLoader:function(){if(!this.canAutoHide()||!1===this.options.loader)return!1;var e=this._toastEl.find(".jq-toast-loader"),t=(this.options.hideAfter-400)/1e3+"s",a=this.options.loaderBg,o=e.attr("style")||"";o=o.substring(0,o.indexOf("-webkit-transition")),o+="-webkit-transition: width "+t+" ease-in;                     -o-transition: width "+t+" ease-in;                     transition: width "+t+" ease-in;                     background-color: "+a+";",e.attr("style",o).addClass("jq-toast-loaded")},animate:function(){var e=this;if(this._toastEl.hide(),this._toastEl.trigger("beforeShow"),"fade"===this.options.showHideTransition.toLowerCase()?this._toastEl.fadeIn(function(){e._toastEl.trigger("afterShown")}):"slide"===this.options.showHideTransition.toLowerCase()?this._toastEl.slideDown(function(){e._toastEl.trigger("afterShown")}):this._toastEl.show(function(){e._toastEl.trigger("afterShown")}),this.canAutoHide()){e=this;t.setTimeout(function(){"fade"===e.options.showHideTransition.toLowerCase()?(e._toastEl.trigger("beforeHide"),e._toastEl.fadeOut(function(){e._toastEl.trigger("afterHidden")})):"slide"===e.options.showHideTransition.toLowerCase()?(e._toastEl.trigger("beforeHide"),e._toastEl.slideUp(function(){e._toastEl.trigger("afterHidden")})):(e._toastEl.trigger("beforeHide"),e._toastEl.hide(function(){e._toastEl.trigger("afterHidden")}))},this.options.hideAfter)}},reset:function(t){"all"===t?e(".jq-toast-wrap").remove():this._toastEl.remove()},update:function(e){this.prepareOptions(e,this.options),this.setup(),this.bindToast()},close:function(){this._toastEl.find(".close-jq-toast-single").click()}};e.toast=function(e){var t=Object.create(s);return t.init(e,this),{reset:function(e){t.reset(e)},update:function(e){t.update(e)},close:function(){t.close()}}},e.toast.options={text:"",heading:"",showHideTransition:"fade",allowToastClose:!0,hideAfter:3e3,loader:!0,loaderBg:"#9EC600",stack:5,position:"bottom-left",bgColor:!1,textColor:!1,textAlign:"left",icon:!1,beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){},onClick:function(){}}}($,window,document);var n=function(){var e=[{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 2",DataClassification:"Confidential",DateIQUploaded:"2017-05-02T02:10:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:1,Id:1,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2018-11-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:7,Title:"Department 1"},LOBNameId:7,OrderNumber:"00001",ProjectName:"Project 1",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"1111",Third_x0020_Party_x0020_Name:"Vendor 1",ThirdPartyName:{ID:1105,Third_x0020_Party_x0020_Name:"Vendor 1"},Tier:1,TSr_x0020_Status:"LOB to ensure the vendor responds to the Assessors request for additional evidence.",OriginalAssessor:"Person 2"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 1",DataClassification:"Internal",DateIQUploaded:"2018-10-02T02:10:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:2,Id:2,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2018-12-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:7,Title:"Department 1"},LOBNameId:7,OrderNumber:"00002",ProjectName:"Project 2",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"2222",Third_x0020_Party_x0020_Name:"Vendor 2",ThirdPartyName:{ID:1105,Third_x0020_Party_x0020_Name:"Vendor 2"},Tier:2,TSr_x0020_Status:"Review Complete",OriginalAssessor:"Person 2"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 3",DataClassification:"Public",DateIQUploaded:"2018-11-02T02:10:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:3,Id:3,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2019-12-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:7,Title:"Department 1"},LOBNameId:7,OrderNumber:"000003",ProjectName:"Project 3",Remediation_Notes:"These are my remediation Notes",Remediation_Status:null,Remediation_Needed:"No",Remediation_Date_Start:null,SMCWorkOrderNumber:"3333",Third_x0020_Party_x0020_Name:"Vendor 3",ThirdPartyName:{ID:287,Third_x0020_Party_x0020_Name:"Vendor 3"},Tier:1,TSr_x0020_Status:"Assessor received SOC report and currently reviewing/mapping security controls",OriginalAssessor:"Person 2"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 1",DataClassification:"Restricted",DateIQUploaded:"2018-12-02T02:10:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:4,Id:4,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2018-10-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:7,Title:"Department 1"},LOBNameId:7,OrderNumber:"00004",ProjectName:"Project 4",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"4444",Third_x0020_Party_x0020_Name:"Vendor 4",ThirdPartyName:{ID:684,Third_x0020_Party_x0020_Name:"Vendor 4"},Tier:3,TSr_x0020_Status:"LOB to ensure the vendor completes and returns Controls Questionnaire.",OriginalAssessor:"Person 2"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 2",DataClassification:"Internal",DateIQUploaded:"2018-10-02T02:10:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:5,Id:5,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2018-11-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:10,Title:"Department 2"},LOBNameId:10,OrderNumber:"00005",ProjectName:"Project 5",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"5555",Third_x0020_Party_x0020_Name:"Vendor 5",ThirdPartyName:{ID:287,Third_x0020_Party_x0020_Name:"Vendor 5"},Tier:3,TSr_x0020_Status:"LOB to ensure vendor mitigates deficient controls.",OriginalAssessor:"Person 2"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 1",DataClassification:"Internal",DateIQUploaded:"2019-10-02T02:10:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:6,Id:6,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2018-11-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:10,Title:"Department 2"},LOBNameId:10,OrderNumber:"00006",ProjectName:"Project 6",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"6666",Third_x0020_Party_x0020_Name:"Vendor 6",ThirdPartyName:{ID:1103,Third_x0020_Party_x0020_Name:"Vendor 6"},Tier:2,TSr_x0020_Status:"On Hold",OriginalAssessor:"Person 4"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 3",DataClassification:"Internal",DateIQUploaded:"2019-09-02T02:10:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:7,Id:7,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2018-11-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:10,Title:"Department 2"},LOBNameId:10,OrderNumber:"000007",ProjectName:"Project 7",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"7777",Third_x0020_Party_x0020_Name:"Vendor 7",ThirdPartyName:{ID:1099,Third_x0020_Party_x0020_Name:"Vendor 7"},Tier:1,TSr_x0020_Status:"Review Complete",OriginalAssessor:"Person 1"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 4",DataClassification:"Internal",DateIQUploaded:"2019-05-02T02:10:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:8,Id:8,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2018-11-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:10,Title:"Department 2"},LOBNameId:10,OrderNumber:"000008",ProjectName:"Project 8",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"8888",Third_x0020_Party_x0020_Name:"Vendor 8",ThirdPartyName:{ID:1088,Third_x0020_Party_x0020_Name:"Vendor 8"},Tier:2,TSr_x0020_Status:"Review Complete",OriginalAssessor:"Person 4"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 3",DataClassification:"Internal",DateIQUploaded:"2019-10-02T02:10:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:9,Id:9,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2018-11-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:10,Title:"Department 2"},LOBNameId:10,OrderNumber:"00009",ProjectName:"Project 9",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"9999",Third_x0020_Party_x0020_Name:"Vendor 9",ThirdPartyName:{ID:215,Third_x0020_Party_x0020_Name:"Vendor 9"},Tier:1,TSr_x0020_Status:"Review Complete",OriginalAssessor:"Person 2"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 5",DataClassification:"Internal",DateIQUploaded:"2017-05-02T02:50:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:10,Id:10,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2018-11-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:17,Title:"Department 3"},LOBNameId:10,OrderNumber:"000010",ProjectName:"Project 10",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"1212",Third_x0020_Party_x0020_Name:"Vendor 10",ThirdPartyName:{ID:1089,Third_x0020_Party_x0020_Name:"Vendor 10"},Tier:3,TSr_x0020_Status:"Review Complete",OriginalAssessor:"Person 1"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 5",DataClassification:"Internal",DateIQUploaded:"2018-02-02T02:50:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:11,Id:11,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2018-11-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:17,Title:"Department 3"},LOBNameId:10,OrderNumber:"000011",ProjectName:"Project 11",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"2323",Third_x0020_Party_x0020_Name:"Vendor 11",ThirdPartyName:{ID:1079,Third_x0020_Party_x0020_Name:"Vendor 11"},Tier:3,TSr_x0020_Status:"Review Complete",OriginalAssessor:"Person 1"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 3",DataClassification:"Internal",DateIQUploaded:"2018-02-02T02:50:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:12,Id:12,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2018-11-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:17,Title:"Department 3"},LOBNameId:10,OrderNumber:"000012",ProjectName:"Project 12",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"3434",Third_x0020_Party_x0020_Name:"Vendor 12",ThirdPartyName:{ID:1069,Third_x0020_Party_x0020_Name:"Vendor 12"},Tier:3,TSr_x0020_Status:"Review Complete",OriginalAssessor:"Person 2"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 3",DataClassification:"Internal",DateIQUploaded:"2018-02-02T02:50:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:13,Id:13,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2019-01-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:18,Title:"Department 4"},LOBNameId:10,OrderNumber:"000013",ProjectName:"Project 13",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"4545",Third_x0020_Party_x0020_Name:"Vendor 13",ThirdPartyName:{ID:1059,Third_x0020_Party_x0020_Name:"Vendor 13"},Tier:4,TSr_x0020_Status:"Review Complete",OriginalAssessor:"Person 2"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 3",DataClassification:"Internal",DateIQUploaded:"2018-02-02T02:50:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:14,Id:14,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2019-01-06T02:10:04Z",LOB:"Department 1",LOBName:{ID:18,Title:"Department 4"},LOBNameId:10,OrderNumber:"000014",ProjectName:"Project 14",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"5656",Third_x0020_Party_x0020_Name:"Vendor 14",ThirdPartyName:{ID:1049,Third_x0020_Party_x0020_Name:"Vendor 14"},Tier:4,TSr_x0020_Status:"Review Complete",OriginalAssessor:"Person 2"},{ActionNeeded:"Do things",AssessorFinalNotes:"these are my notes 1",CommentWeek1:"this is comment for week 1",CommentWeek2:"this is comment for week 2",CommentWeek3:"this is comment for week 3",CommentWeek4:"this is comment for week 4",CommentWeek5:"this is comment for week 5",CommentWeek6:"this is comment for week 6",CommentWeek7:"this is comment for week 7",ControlAssessor:"Person 3",DataClassification:"Internal",DateIQUploaded:"2019-01-01T02:50:04Z",DateComplete:"2018-12-07T02:10:04Z",ID:15,Id:15,IsCEUD:!1,IsPII:!0,IsPHI:!1,Last_x0020_Update:"2019-01-04T02:10:04Z",LOB:"Department 1",LOBName:{ID:18,Title:"Department 4"},LOBNameId:10,OrderNumber:"000015",ProjectName:"Project 15",Remediation_Notes:"These are my remediation Notes",Remediation_Status:"Remediation Complete",Remediation_Needed:"Yes",Remediation_Date_Start:null,SMCWorkOrderNumber:"7878",Third_x0020_Party_x0020_Name:"Vendor 15",ThirdPartyName:{ID:1039,Third_x0020_Party_x0020_Name:"Vendor 15"},Tier:4,TSr_x0020_Status:"Review Complete",OriginalAssessor:"Person 2"}],t=[{ID:18,Id:18,ReOrgOut:!1,Title:"Department 4"},{ID:17,Id:17,ReOrgOut:!1,Title:"Department 3"},{ID:16,Id:16,ReOrgOut:!1,Title:"Department 5"},{ID:15,Id:15,ReOrgOut:!1,Title:"Department 6"},{ID:14,Id:14,ReOrgOut:!1,Title:"Department 7"},{ID:13,Id:13,ReOrgOut:!1,Title:"Department 8"},{ID:12,Id:12,ReOrgOut:!1,Title:"Department 9"},{ID:11,Id:11,ReOrgOut:!1,Title:"Department 10"},{ID:10,Id:10,ReOrgOut:!1,Title:"Department 2"},{ID:9,Id:9,ReOrgOut:!1,Title:"Department 11"},{ID:8,Id:8,ReOrgOut:!1,Title:"Department 12"},{ID:7,Id:7,ReOrgOut:!1,Title:"Department 1"},{ID:1,Id:1,ReOrgOut:!1,Title:"Department 13"}],a=[{Active:"Yes",Assessment:"PERSON 1"},{Active:"Yes",Assessment:"PERSON 2"},{Active:"Yes",Assessment:"PERSON 3"},{Active:"Yes",Assessment:"PERSON 4"},{Active:"Yes",Assessment:"PERSON 5"}],o=[{ID:1,Id:1,Assessment:1,Assessment_x0020_Type:2,Information_x0020_Classification:"Confidential"},{ID:2,Id:2,Assessment:2,Assessment_x0020_Type:3,Information_x0020_Classification:"Internal"},{ID:3,Id:3,Assessment:3,Assessment_x0020_Type:3,Information_x0020_Classification:"Public"},{ID:4,Id:4,Assessment:4,Assessment_x0020_Type:3,Information_x0020_Classification:"Restricted"},{ID:5,Id:5,Assessment:5,Assessment_x0020_Type:3,Information_x0020_Classification:"Internal"},{ID:6,Id:6,Assessment:6,Assessment_x0020_Type:3,Information_x0020_Classification:"Internal"},{ID:7,Id:7,Assessment:7,Assessment_x0020_Type:3,Information_x0020_Classification:"Internal"},{ID:8,Id:8,Assessment:8,Assessment_x0020_Type:3,Information_x0020_Classification:"Internal"},{ID:9,Id:9,Assessment:9,Assessment_x0020_Type:3,Information_x0020_Classification:"Internal"},{ID:10,Id:10,Assessment:11,Assessment_x0020_Type:2,Information_x0020_Classification:"Internal"},{ID:11,Id:11,Assessment:11,Assessment_x0020_Type:1,Information_x0020_Classification:"Internal"},{ID:12,Id:12,Assessment:12,Assessment_x0020_Type:2,Information_x0020_Classification:"Confidential"},{ID:13,Id:13,Assessment:13,Assessment_x0020_Type:2,Information_x0020_Classification:"Restricted"},{ID:14,Id:14,Assessment:14,Assessment_x0020_Type:2,Information_x0020_Classification:"Confidential"},{ID:15,Id:15,Assessment:15,Assessment_x0020_Type:1,Information_x0020_Classification:"Confidential"}];function n(e,t){console.log("You did not do the thing!!!"),console.log(t),console.log(e)}function s(e,t){console.log("You did not do the thing!!!"),console.log(t),console.log(e)}return{getCurrentUser:function(e,t){if(e){var a=_spPageContextInfo.webAbsoluteUrl+"/_api/web/getuserbyid("+_spPageContextInfo.userId+")?$select=*&$expand=Groups";$.ajax({url:a,type:"GET",headers:{accept:"application/json; odata=verbose"},success:function(e){var a=e.d.LoginName;"admin"===a.slice(-5)?t(a.slice(a.length-9,a.length-5).toUpperCase()):t(a.slice(-4).toUpperCase())},error:s})}else setTimeout(function(){t("K3BI")},500)},getModifyTableData:function(t,a){if(t){var o=_spPageContextInfo.webAbsoluteUrl+"/_api/web/lists/getbytitle('tblAssessments')/items?$select=*,LOBName/ID,LOBName/Title,ThirdPartyName/ID,ThirdPartyName/Third_x0020_Party_x0020_Name,Attachments,AttachmentFiles&$expand=LOBName/ID,LOBName/Title,ThirdPartyName/ID,ThirdPartyName/Third_x0020_Party_x0020_Name,AttachmentFiles&$filter=IsLegacyData eq false&$top=900&$orderby=ID desc";$.ajax({url:o,type:"GET",headers:{accept:"application/json; odata=verbose"},success:function(e){a(e.d.results)},error:s})}else setTimeout(function(){a(e)},500)},getAssessorTableData:function(t,a,o){if(t){var n=_spPageContextInfo.webAbsoluteUrl+"/_api/web/lists/getbytitle('tblAssessments')/items?$select=*,LOBName/ID,LOBName/Title,ThirdPartyName/ID,ThirdPartyName/Third_x0020_Party_x0020_Name,Attachments,AttachmentFiles&$expand=LOBName/ID,LOBName/Title,ThirdPartyName/ID,ThirdPartyName/Third_x0020_Party_x0020_Name,AttachmentFiles&$filter=(TSr_x0020_Status ne 'Review Complete' and TSr_x0020_Status ne 'Review Cancelled' and TSr_x0020_Status ne 'No TSR Required') and (ControlAssessor eq '"+a+"')&$orderby=ID desc";$.ajax({url:n,type:"GET",headers:{accept:"application/json; odata=verbose"},success:function(e){o(e.d.results)},error:s})}else setTimeout(function(){o(e)},500)},getSingleModifyAssessment:function(t,a,o){if(t){var n=_spPageContextInfo.webAbsoluteUrl+"/_api/web/lists/getbytitle('tblAssessments')/items?$select=*,LOBName/ID,LOBName/Title,ThirdPartyName/ID,ThirdPartyName/Third_x0020_Party_x0020_Name,Attachments,AttachmentFiles&$expand=LOBName/ID,LOBName/Title,ThirdPartyName/ID,ThirdPartyName/Third_x0020_Party_x0020_Name,AttachmentFiles&$filter=ID eq "+a;$.ajax({url:n,type:"GET",headers:{Accept:"application/json;odata=verbose"},success:function(e){o(e.d.results[0])},error:function(e){alert("Item not Available")}})}else setTimeout(function(){o(e[a-1])},500)},postSingleAssessment:function(t,a,o,s,i){var r=new Date,l={__metadata:{type:"SP.ListItem"}};l[o]=s,l.Last_x0020_Update=r.toISOString(),t?$.ajax({url:_spPageContextInfo.webAbsoluteUrl+"/_api/web/lists/GetByTitle('tblAssessments')/items("+a+")",type:"POST",data:JSON.stringify(l),headers:{Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose","X-RequestDigest":$("#__REQUESTDIGEST").val(),"IF-MATCH":"*","X-HTTP-Method":"MERGE"},success:i,error:n}):setTimeout(function(){e[a-1][o]=s,e[a-1].Last_x0020_Update=r.toISOString(),i()},500)},getAssessmentInformation:function(a,n,s,i,r){var l;a?(l="tblAssessments"===i?_spPageContextInfo.webAbsoluteUrl+"/_api/web/lists/getbytitle('"+i+"')/items?$select=*,LOBName/ID,LOBName/Title,ThirdPartyName/ID,ThirdPartyName/Third_x0020_Party_x0020_Name,Attachments,AttachmentFiles&$expand=LOBName/ID,LOBName/Title,ThirdPartyName/ID,ThirdPartyName/Third_x0020_Party_x0020_Name,AttachmentFiles&$filter="+n+" eq "+s:"tblLOB"===i?_spPageContextInfo.webAbsoluteUrl+"/_api/web/lists/getbytitle('"+i+"')/items?$select=*&$filter=ReOrgOut eq false and "+n+" eq "+s:_spPageContextInfo.webAbsoluteUrl+"/_api/web/lists/getbytitle('"+i+"')/items?$select=*&$filter="+n+" eq "+s,$.ajax({url:l,type:"GET",headers:{Accept:"application/json;odata=verbose"},success:function(e){r(e.d.results[0])},error:function(e){alert("Item not Available")}})):setTimeout(function(){"tblAssessments"===i?e.forEach(function(e){e[n]===s&&r(e)}):"tblLOB"===i?t.forEach(function(e){e[n]===s&&r(e)}):"tblIQInformation"===i?o.forEach(function(e){e[n]===s&&r(e)}):console.log("could not find this table provided")},500)},mergeAssessmentInformation:function(a,o,s,i,r){var l=JSON.parse(JSON.stringify(s));if(l.__metadata={type:"SP.ListItem"},"tblAssessments"===i){var d=new Date;l.Last_x0020_Update=d.toISOString()}a?$.ajax({url:_spPageContextInfo.webAbsoluteUrl+"/_api/web/lists/GetByTitle('"+i+"')/items("+o+")",type:"POST",data:JSON.stringify(l),headers:{Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose","X-RequestDigest":$("#__REQUESTDIGEST").val(),"IF-MATCH":"*","X-HTTP-Method":"MERGE"},success:r,error:n}):setTimeout(function(){"tblAssessments"===i?(Object.keys(l).forEach(function(t,a){e[o-1][t]=l[t]}),r()):"tblLOB"===i?(t.forEach(function(e){e.Id===o&&Object.keys(l).forEach(function(t,a){e[t]=l[t]})}),r()):"tblIQInformation"===i?(t.forEach(function(e){e.Id===o&&Object.keys(l).forEach(function(t,a){e[t]=l[t]})}),r()):console.log("could not find this table provided in order to merge")},500)},getReportData:function(t,a){if(t){var o=_spPageContextInfo.webAbsoluteUrl+"/_api/web/lists/getbytitle('tblAssessments')/items?$select=*,LOBName/ID,LOBName/Title,ThirdPartyName/ID,ThirdPartyName/Third_x0020_Party_x0020_Name,Attachments,AttachmentFiles&$expand=LOBName/ID,LOBName/Title,ThirdPartyName/ID,ThirdPartyName/Third_x0020_Party_x0020_Name,AttachmentFiles&$top=2000&$orderby=DateIQUploaded desc,ID desc";$.ajax({url:o,type:"GET",headers:{accept:"application/json; odata=verbose"},success:function(e){a(e.d.results)},error:s})}else setTimeout(function(){a(e)},500)},getAllDepartments:function(e,a){if(e){var o=_spPageContextInfo.webAbsoluteUrl+"/_api/web/lists/getbytitle('tblLOB')/items?$select=*";$.ajax({url:o,type:"GET",headers:{accept:"application/json; odata=verbose"},success:function(e){a(e.d.results)},error:s})}else setTimeout(function(){a(t)},500)},getAllUsers:function(e,t){if(e){var o=_spPageContextInfo.webAbsoluteUrl+"/_api/web/lists/getbytitle('tblAssessor')/items?$select=*";$.ajax({url:o,type:"GET",headers:{accept:"application/json; odata=verbose"},success:function(e){t(e.d.results)},error:s})}else setTimeout(function(){t(a)},500)}}}(),s=function(){var e={modify:{tableRef:null,initialAdjust:!0,columnPairs:[{colName:"ID",spColName:"ID"},{colName:"Third Party Name",spColName:"Third_x0020_Party_x0020_Name"},{colName:"Line of Business",spColName:"LOB"},{colName:"CEUD",spColName:"IsCEUD"},{colName:"PII",spColName:"IsPII"},{colName:"PHI",spColName:"IsPHI"},{colName:"Date Started",spColName:"DateIQUploaded"},{colName:"Date Complete",spColName:"DateComplete"},{colName:"Controls Assessor",spColName:"ControlAssessor"},{colName:"TSR Status",spColName:"TSr_x0020_Status"},{colName:"Last Update",spColName:"Last_x0020_Update"}]},assessor:{tableRef:null,initialAdjust:!0,columnPairs:[{colName:"ID",spColName:"ID"},{colName:"Third Party Name",spColName:"Third_x0020_Party_x0020_Name"},{colName:"Line of Business",spColName:"LOB"},{colName:"Original Assessor",spColName:"OriginalAssessor"},{colName:"Date Started",spColName:"DateIQUploaded"},{colName:"TSR Status",spColName:"TSr_x0020_Status"},{colName:"Last Update",spColName:"Last_x0020_Update"}]}},t=[{show:!0,eleID:"K_vendorName",colName:"Third_x0020_Party_x0020_Name"},{show:!0,eleID:"K_LOB",colName:"LOB"},{show:!0,eleID:"K_orderNum",colName:"OrderNumber"},{show:!0,eleID:"K_Tier",colName:"Tier"},{show:!0,eleID:"K_dateStarted",colName:"DateIQUploaded"},{show:!0,eleID:"K_workOrderNum",colName:"SMCWorkOrderNumber"},{show:!0,eleID:"K_infoClass",colName:"DataClassification"},{show:!0,eleID:"K_assessor",colName:"ControlAssessor"},{show:!0,eleID:"K_projectName",colName:"ProjectName"},{show:!1,eleID:"K_contactTitle",colName:""},{show:!0,eleID:"K_generalStatus",colName:"TSr_x0020_Status"},{show:!1,eleID:"K_actionNeeded",colName:"TSr_x0020_Status"},{show:!0,eleID:"K_commentsWeek1",colName:"CommentWeek1"},{show:!0,eleID:"K_commentsWeek2",colName:"CommentWeek2"},{show:!0,eleID:"K_commentsWeek3",colName:"CommentWeek3"},{show:!0,eleID:"K_commentsWeek4",colName:"CommentWeek4"},{show:!0,eleID:"K_commentsWeek5",colName:"CommentWeek5"},{show:!0,eleID:"K_commentsWeek6",colName:"CommentWeek6"},{show:!0,eleID:"K_commentsWeek7",colName:"CommentWeek7"},{show:!0,eleID:"K_assessorNotes",colName:"AssessorFinalNotes"},{show:!0,eleID:"K_remediationStatus",colName:"Remediation_Status"},{show:!0,eleID:"K_remediationNotes",colName:"Remediation_Notes"}],a=[{show:!0,eleID:"K_generalStatus_2",colName:"TSr_x0020_Status"},{show:!1,eleID:"K_actionNeeded_2",colName:"TSr_x0020_Status"},{show:!0,eleID:"K_commentsWeek1_2",colName:"CommentWeek1"},{show:!0,eleID:"K_commentsWeek2_2",colName:"CommentWeek2"},{show:!0,eleID:"K_commentsWeek3_2",colName:"CommentWeek3"},{show:!0,eleID:"K_commentsWeek4_2",colName:"CommentWeek4"},{show:!0,eleID:"K_commentsWeek5_2",colName:"CommentWeek5"},{show:!0,eleID:"K_commentsWeek6_2",colName:"CommentWeek6"},{show:!0,eleID:"K_commentsWeek7_2",colName:"CommentWeek7"},{show:!0,eleID:"K_assessorNotes_2",colName:"AssessorFinalNotes"},{show:!0,eleID:"K_remediationStatus_2",colName:"Remediation_Status"},{show:!0,eleID:"K_remediationNotes_2",colName:"Remediation_Notes"}];function o(t,a){var o={};if("modify"===t)e.modify.columnPairs.forEach(function(e){"Third Party Name"===e.colName?o[e.colName]=a.ThirdPartyName.Third_x0020_Party_x0020_Name:"Line of Business"===e.colName?o[e.colName]=a.LOBName.Title:o[e.colName]=a[e.spColName]});else{if("assessor"!==t)throw Error("Did not put a correct table name, cannot determine which table to format the row data to");e.assessor.columnPairs.forEach(function(e){"Third Party Name"===e.colName?o[e.colName]=a.ThirdPartyName.Third_x0020_Party_x0020_Name:"Line of Business"===e.colName?o[e.colName]=a.LOBName.Title:o[e.colName]=a[e.spColName]})}return o}function n(e,t){"modify"===e?"Assessor Working"===t?($("#K_actionNeeded").empty(),$("#K_actionNeeded").append("<option>Assessor received ISO report and currently reviewing/mapping security controls</option>"),$("#K_actionNeeded").append("<option>Assessor received SOC report and currently reviewing/mapping security controls</option>"),$("#K_actionNeeded").append("<option>TSR Assessor to complete review and analysis.</option>")):"Cancelled"===t?($("#K_actionNeeded").empty(),$("#K_actionNeeded").append("<option>Review Cancelled</option>")):"No TSR Required"===t?($("#K_actionNeeded").empty(),$("#K_actionNeeded").append("<option>No TSR Required</option>")):"On Hold"===t?($("#K_actionNeeded").empty(),$("#K_actionNeeded").append("<option>On Hold</option>")):"On Site"===t?($("#K_actionNeeded").empty(),$("#K_actionNeeded").append("<option>On Site Assessment in Progress</option>"),$("#K_actionNeeded").append("<option>On Site Assessment Complete</option>")):"Renewal"===t?($("#K_actionNeeded").empty(),$("#K_actionNeeded").append("<option>No Longer Doing Business with Vendor</option>")):"Review Complete"===t?($("#K_actionNeeded").empty(),$("#K_actionNeeded").append("<option>LOB to ensure vendor mitigates deficient controls.</option>"),$("#K_actionNeeded").append("<option>Review Complete</option>")):"Waiting for 3P Response"===t?($("#K_actionNeeded").empty(),$("#K_actionNeeded").append("<option>LOB to ensure the vendor responds to the Assessors request for additional evidence.</option>"),$("#K_actionNeeded").append("<option>LOB to ensure the vendor responds to the Assessors request for clarification.</option>"),$("#K_actionNeeded").append("<option>LOB to ensure the vendor completes and returns Controls Questionnaire.</option>")):"Waiting for LOB Response"===t?($("#K_actionNeeded").empty(),$("#K_actionNeeded").append("<option>LOB contact to provide additional information for the Intake Questionnaire to allow proper risk evaluation.</option>"),$("#K_actionNeeded").append("<option>LOB contact to complete and submit Intake Questionnaire</option>")):console.log("issue with updating the action needed options"):"assessor"===e?"Assessor Working"===t?($("#K_actionNeeded_2").empty(),$("#K_actionNeeded_2").append("<option>Assessor received ISO report and currently reviewing/mapping security controls</option>"),$("#K_actionNeeded_2").append("<option>Assessor received SOC report and currently reviewing/mapping security controls</option>"),$("#K_actionNeeded_2").append("<option>TSR Assessor to complete review and analysis.</option>")):"Cancelled"===t?($("#K_actionNeeded_2").empty(),$("#K_actionNeeded_2").append("<option>Review Cancelled</option>")):"No TSR Required"===t?($("#K_actionNeeded_2").empty(),$("#K_actionNeeded_2").append("<option>No TSR Required</option>")):"On Hold"===t?($("#K_actionNeeded_2").empty(),$("#K_actionNeeded_2").append("<option>On Hold</option>")):"On Site"===t?($("#K_actionNeeded_2").empty(),$("#K_actionNeeded_2").append("<option>On Site Assessment in Progress</option>"),$("#K_actionNeeded_2").append("<option>On Site Assessment Complete</option>")):"Renewal"===t?($("#K_actionNeeded_2").empty(),$("#K_actionNeeded_2").append("<option>No Longer Doing Business with Vendor</option>")):"Review Complete"===t?($("#K_actionNeeded_2").empty(),$("#K_actionNeeded_2").append("<option>LOB to ensure vendor mitigates deficient controls.</option>"),$("#K_actionNeeded_2").append("<option>Review Complete</option>")):"Waiting for 3P Response"===t?($("#K_actionNeeded_2").empty(),$("#K_actionNeeded_2").append("<option>LOB to ensure the vendor responds to the Assessors request for additional evidence.</option>"),$("#K_actionNeeded_2").append("<option>LOB to ensure the vendor responds to the Assessors request for clarification.</option>"),$("#K_actionNeeded_2").append("<option>LOB to ensure the vendor completes and returns Controls Questionnaire.</option>")):"Waiting for LOB Response"===t?($("#K_actionNeeded_2").empty(),$("#K_actionNeeded_2").append("<option>LOB contact to provide additional information for the Intake Questionnaire to allow proper risk evaluation.</option>"),$("#K_actionNeeded_2").append("<option>LOB contact to complete and submit Intake Questionnaire</option>")):console.log("issue with updating the action needed options"):console.log("there was an issue, no valid table was picked")}Date.prototype.getMonthName=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"][this.getMonth()]};!function(){var e=document.createElement("div")}();return{initialzie:function(t,a){e.modify.tableRef=$("#modifyTable_id").DataTable({scrollX:!0,scrollY:"200px",paging:!0,pageLength:50,order:[],fixedHeader:!0,select:"single",dom:"Bfrtip",buttons:[{text:"Reload",action:function(e,a,o,n){a.clear(),t(),a.draw()}}],columnDefs:[{className:"dt-center",targets:"_all"}],columns:[{data:"ID"},{data:"Third Party Name"},{data:"Line of Business"},{data:"CEUD"},{data:"PII"},{data:"PHI"},{data:"Date Started",type:"date",render:function(e){if(null===e||"Loading"===e)return"";var t=new Date(e),a=t.getMonth()+1,o=t.getDate();return o=o>9?o:"0"+o,(a>9?a:"0"+a)+"/"+o+"/"+t.getFullYear()+", "+t.toLocaleTimeString()}},{data:"Date Complete",type:"date",render:function(e){if(null===e||"Loading"===e)return"";var t=new Date(e),a=t.getMonth()+1,o=t.getDate();return o=o>9?o:"0"+o,(a>9?a:"0"+a)+"/"+o+"/"+t.getFullYear()+", "+t.toLocaleTimeString()}},{data:"Controls Assessor",render:function(e){return e.toUpperCase()}},{data:"TSR Status"},{data:"Last Update",type:"date",render:function(e){if(null===e||"Loading"===e)return"";var t=new Date(e),a=t.getMonth()+1,o=t.getDate();return o=o>9?o:"0"+o,(a>9?a:"0"+a)+"/"+o+"/"+t.getFullYear()+", "+t.toLocaleTimeString()}}]}),e.modify.tableRef.clear(),e.assessor.tableRef=$("#assessorTable_id").DataTable({scrollX:!1,scrollY:"200px",paging:!1,order:[],fixedHeader:!0,select:"single",dom:"Bfrtip",buttons:[{text:"Reload",action:function(e,t,o,n){t.clear(),a(),t.draw()}}],columnDefs:[{className:"dt-center",targets:"_all"}],columns:[{data:"ID"},{data:"Third Party Name"},{data:"Line of Business"},{data:"Original Assessor",render:function(e){return e.toUpperCase()}},{data:"Date Started",type:"date",render:function(e){if(null===e||"Loading"===e)return"";var t=new Date(e),a=t.getMonth()+1,o=t.getDate();return o=o>9?o:"0"+o,(a>9?a:"0"+a)+"/"+o+"/"+t.getFullYear()+", "+t.toLocaleTimeString()}},{data:"TSR Status"},{data:"Last Update",type:"date",render:function(e){if(null===e||"Loading"===e)return"";var t=new Date(e),a=t.getMonth()+1,o=t.getDate();return o=o>9?o:"0"+o,(a>9?a:"0"+a)+"/"+o+"/"+t.getFullYear()+", "+t.toLocaleTimeString()}}]}),e.assessor.tableRef.clear(),$("#K_generalStatus").change(function(){n("modify",$("#K_generalStatus").val())}),$("#K_generalStatus_2").change(function(){n("assessor",$("#K_generalStatus_2").val())})},returnFormatTableRow:function(e,t){return o(e,t)},renderModifyTableSingleRow:function(t){e.modify.tableRef.row.add(o("modify",t)).draw(),e.modify.tableRef.columns.adjust().draw()},renderModifyTableData:function(t){t.forEach(function(t){e.modify.tableRef.row.add(o("modify",t))}),e.modify.tableRef.draw()},renderAssessorTableData:function(t){t.forEach(function(t){e.assessor.tableRef.row.add(o("assessor",t))}),e.assessor.tableRef.columns.adjust().draw()},modifyTableAutoAdjust:function(){e.modify.initialAdjust&&e.modify.tableRef.columns.adjust()},assessorTableAutoAdjust:function(){e.assessor.initialAdjust&&e.assessor.tableRef.columns.adjust().draw()},modifyTableReference:function(){return e.modify.tableRef},assessorTableReference:function(){return e.assessor.tableRef},renderAssessorElements:function(e){var t;a.forEach(function(a){a.show&&("DateIQUploaded"===a.colName?(t=new Date(e[a.colName]),/Trident\/|MSIE /.test(window.navigator.userAgent),$("#"+a.eleID).val((t.getMonth()<9?"0"+(t.getMonth()+1).toString():t.getMonth()+1)+"/"+(1===t.getDate().toString().length?"0"+t.getDate().toString():t.getDate())+"/"+t.getFullYear())):"LOB"===a.colName?$("#"+a.eleID).val(e.LOBName.Title):"Third_x0020_Party_x0020_Name"===a.colName?$("#"+a.eleID).val(e.ThirdPartyName.Third_x0020_Party_x0020_Name):"ControlAssessor"===a.colName?$("#"+a.eleID).val(e[a.colName].toUpperCase()):"TSr_x0020_Status"===a.colName?"Assessor received SOC report and currently reviewing/mapping security controls"===e[a.colName]||"Assessor received ISO report and currently reviewing/mapping security controls"===e[a.colName]||"TSR Assessor to complete review and analysis."===e[a.colName]?($("#"+a.eleID).val("Assessor Working"),n("assessor","Assessor Working"),$("#K_actionNeeded_2").val(e[a.colName])):"LOB to ensure the vendor completes and returns Controls Questionnaire."===e[a.colName]||"LOB to ensure the vendor responds to the Assessors request for clarification."===e[a.colName]||"LOB to ensure the vendor responds to the Assessors request for additional evidence."===e[a.colName]?($("#"+a.eleID).val("Waiting for 3P Response"),n("assessor","Waiting for 3P Response"),$("#K_actionNeeded_2").val(e[a.colName])):"LOB contact to complete and submit Intake Questionnaire"===e[a.colName]||"LOB contact to provide additional information for the Intake Questionnaire to allow proper risk evaluation."===e[a.colName]?($("#"+a.eleID).val("Waiting for LOB Response"),n("assessor","Waiting for LOB Response"),$("#K_actionNeeded_2").val(e[a.colName])):"Review Cancelled"===e[a.colName]?($("#"+a.eleID).val("Cancelled"),n("assessor","Cancelled"),$("#K_actionNeeded_2").val(e[a.colName])):"No TSR Required"===e[a.colName]?($("#"+a.eleID).val("No TSR Required"),n("assessor","No TSR Required"),$("#K_actionNeeded_2").val(e[a.colName])):"Review Complete"===e[a.colName]||"LOB to ensure vendor mitigates deficient controls."===e[a.colName]?($("#"+a.eleID).val("Review Complete"),n("assessor","Review Complete"),$("#K_actionNeeded_2").val(e[a.colName])):"On Site Assessment in Progress"===e[a.colName]||"On Site Assessment Complete"===e[a.colName]?($("#"+a.eleID).val("On Site"),n("assessor","On Site"),$("#K_actionNeeded_2").val(e[a.colName])):"On Hold"===e[a.colName]?($("#"+a.eleID).val("On Hold"),n("assessor","On Hold"),$("#K_actionNeeded_2").val(e[a.colName])):"No Longer Doing Business with Vendor"===e[a.colName]?($("#"+a.eleID).val("Renewal"),n("assessor","Renewal"),$("#K_actionNeeded_2").val(e[a.colName])):console.log("There was an issue, no valid status was provided"):$("#"+a.eleID).val($("<textarea />").html(e[a.colName]).text().replace("<div>","").replace("</div>","")))})},renderModifyElements:function(e){var a;t.forEach(function(t){t.show&&("DateIQUploaded"===t.colName?(a=new Date(e[t.colName]),/Trident\/|MSIE /.test(window.navigator.userAgent),$("#"+t.eleID).val((a.getMonth()<9?"0"+(a.getMonth()+1).toString():a.getMonth()+1)+"/"+(1===a.getDate().toString().length?"0"+a.getDate().toString():a.getDate())+"/"+a.getFullYear())):"LOB"===t.colName?$("#"+t.eleID).val(e.LOBName.Title):"Third_x0020_Party_x0020_Name"===t.colName?$("#"+t.eleID).val(e.ThirdPartyName.Third_x0020_Party_x0020_Name):"ControlAssessor"===t.colName?$("#"+t.eleID).val(e[t.colName].toUpperCase()):"TSr_x0020_Status"===t.colName?"Assessor received SOC report and currently reviewing/mapping security controls"===e[t.colName]||"Assessor received ISO report and currently reviewing/mapping security controls"===e[t.colName]||"TSR Assessor to complete review and analysis."===e[t.colName]?($("#"+t.eleID).val("Assessor Working"),n("modify","Assessor Working"),$("#K_actionNeeded").val(e[t.colName])):"LOB to ensure the vendor completes and returns Controls Questionnaire."===e[t.colName]||"LOB to ensure the vendor responds to the Assessors request for clarification."===e[t.colName]||"LOB to ensure the vendor responds to the Assessors request for additional evidence."===e[t.colName]?($("#"+t.eleID).val("Waiting for 3P Response"),n("modify","Waiting for 3P Response"),$("#K_actionNeeded").val(e[t.colName])):"LOB contact to complete and submit Intake Questionnaire"===e[t.colName]||"LOB contact to provide additional information for the Intake Questionnaire to allow proper risk evaluation."===e[t.colName]?($("#"+t.eleID).val("Waiting for LOB Response"),n("modify","Waiting for LOB Response"),$("#K_actionNeeded").val(e[t.colName])):"Review Cancelled"===e[t.colName]?($("#"+t.eleID).val("Cancelled"),n("modify","Cancelled"),$("#K_actionNeeded").val(e[t.colName])):"No TSR Required"===e[t.colName]?($("#"+t.eleID).val("No TSR Required"),n("modify","No TSR Required"),$("#K_actionNeeded").val(e[t.colName])):"Review Complete"===e[t.colName]||"LOB to ensure vendor mitigates deficient controls."===e[t.colName]?($("#"+t.eleID).val("Review Complete"),n("modify","Review Complete"),$("#K_actionNeeded").val(e[t.colName])):"On Site Assessment in Progress"===e[t.colName]||"On Site Assessment Complete"===e[t.colName]?($("#"+t.eleID).val("On Site"),n("modify","On Site"),$("#K_actionNeeded").val(e[t.colName])):"On Hold"===e[t.colName]?($("#"+t.eleID).val("On Hold"),n("modify","On Hold"),$("#K_actionNeeded").val(e[t.colName])):"No Longer Doing Business with Vendor"===e[t.colName]?($("#"+t.eleID).val("Renewal"),n("modify","Renewal"),$("#K_actionNeeded").val(e[t.colName])):console.log("There was an issue, no valid status was provided"):$("#"+t.eleID).val($("<textarea />").html(e[t.colName]).text().replace("<div>","").replace("</div>","")))})},renderBarChart:function(e,t,a,o,n,s){var i,r=d3.select(e).append("svg").attr("height",600).attr("width",600),l=d3.scaleBand().domain(t.map(function(e){return e.name})).rangeRound([100,500]).padding(.2),d=d3.scaleLinear().domain([0,d3.max(t,function(e){return e.data})]).rangeRound([500,100]);r.selectAll("rect").data(t).enter().append("rect").attr("x",function(e,t){return l(e.name)}).attr("y",function(e,t){return d(e.data)}).attr("width",l.bandwidth()).attr("height",function(e,t){return 500-d(e.data)}).attr("fill","#7ed26d").on("mouseover",function(t){var a=parseFloat(d3.select(this).attr("x"))+l.bandwidth()/2,o=parseFloat(d3.select(this).attr("y"))/2+300;d3.select(e+" .tooltip").style("left",a+"px").style("top",o+"px").style("display","block").style("white-space","pre-line").text(t.name+": \n "+t.data)}).on("mouseout",function(){d3.select(e+" .tooltip").style("display","none")});var m=d3.axisBottom(l);r.append("g").attr("class","x-axis").attr("transform","translate(0,500)").attr("color","#000").call(m).selectAll("text").attr("transform",s?"rotate(25)":"rotate(0)").attr("text-anchor",s?"start":"middle").attr("font-size",12).attr("class","x_label_text");var c=d3.axisLeft(d);r.append("g").attr("class","y-axis").attr("transform","translate(100,0)").attr("color","#000").call(c).selectAll("text").attr("font-size",12).attr("class","y_label_text"),i=Math.ceil(l.bandwidth()/3)>10?Math.ceil(l.bandwidth()/3):10,r.append("g").attr("class","labels").selectAll("text").data(t).enter().append("text").text(function(e,t){return e.data}).attr("x",function(e,t){return l(e.name)+l.bandwidth()/2}).attr("y",function(e,t){return 500-d(e.data)<1.5*i?d(e.data)-i/2:d(e.data)+1.2*i}).attr("font-size",i).attr("fill",function(e,t){return 500-d(e.data)<1.5*i?"#000":"#FFF"}).attr("text-anchor","middle").style("pointer-events","none"),r.append("text").attr("x",300).attr("y",50).style("text-anchor","middle").style("font-size",20).text(a),r.append("text").attr("x",300).attr("y",s?590:550).style("text-anchor","middle").style("font-size",18).text(o),r.append("text").attr("transform","rotate(-90)").attr("y",38).attr("x",-300).attr("dy","1em").style("text-anchor","middle").style("font-size",18).text(n)},refreshBarChart:function(e,t){var a,o=d3.select(e+" svg"),n=d3.scaleBand().domain(t.map(function(e){return e.name})).rangeRound([100,900]).padding(.2),s=d3.scaleLinear().domain([0,d3.max(t,function(e){return e.data})]).rangeRound([900,100]),i=d3.axisBottom(n);o.select(".x-axis").transition().duration(800).attr("transform","translate(0,900)").attr("color","#000").call(i).selectAll("text").attr("class","x_label_text");var r=d3.axisLeft(s);o.select(".y-axis").transition().duration(800).attr("transform","translate(100,0)").attr("color","#000").call(r).selectAll("text"),a=Math.ceil(n.bandwidth()/3)>12?Math.ceil(n.bandwidth()/3):12,o.selectAll("rect").data(t).transition().duration(800).attr("y",function(e,t){return s(e.data)}).attr("height",function(e,t){return 900-s(e.data)}).attr("fill","#7ed26d"),o.selectAll(".labels text").data(t).transition().duration(800).text(function(e,t){return e.data}).attr("y",function(e,t){return 900-s(e.data)<1.5*a?s(e.data)-a/2:s(e.data)+1.2*a}).attr("fill",function(e,t){return 900-s(e.data)<1.5*a?"#000":"#FFF"}).attr("text-anchor","middle")},renderKPIs:function(e){e.forEach(function(e){$("#"+e.name+"_KPI").text(e.data)})},renderAllKPIs:function(e,t,a,o){t.forEach(function(e){$("#"+e.name+"_KPI_"+a).text(e.data)}),$("#Total_KPI_"+a).text(e),$("#overall_TSR_"+a).text(e),$("#overall_TSR_Label_"+a).text(o)},render2019SubmissionReport:function(e,t){(function(e,t,a){var o={bar_chart:null,y_scale:null,x_scale:null,y_axis:null,x_axis:null,initialized:!1,data:t||{name:"loading",data:0},options:{title:a.title||"2019 LOB DATA",x_title:a.x_title||"Line of Business",y_title:a.y_title||"Assessments",rotateX:a.rotateX||!1,chart_height:a.chart_height||800,chart_width:a.chart_width||800,chart_padding_top:a.chart_padding_top||100,chart_padding_bottom:a.chart_padding_bottom||100,chart_padding_left:a.chart_padding_left||100,chart_padding_right:a.chart_padding_right||100,label_font_size:a.label_font_size||12,axes_font_size:a.axes_font_size||12,x_axes_font_size:a.axes_font_size||12,y_axes_font_size:a.axes_font_size||14,rect_color:a.rect_color||"#7ed26d"}};function n(e){var t=d3.select(e.node().parentNode),a=parseInt(e.style("width")),o=parseInt(e.style("height")),n=a/o;function s(){var a=parseInt(t.style("width"));e.attr("width",a),e.attr("height",Math.round(a/n))}e.attr("viewBox","0 0 "+a+" "+o).attr("perserveAspectRatio","xMinYMid").call(s),d3.select(window).on("resize."+t.attr("id"),s)}return{init:function(){if(o.initialized)return null;var t=o.data.map(function(e){var t=JSON.parse(JSON.stringify(e));return t.data=0,t});o.bar_chart=o.bar_chart||d3.select(e).append("svg").attr("height",o.options.chart_height).attr("width",o.options.chart_width).style("background-color","#eee").call(n),o.x_scale=d3.scaleBand().domain(t.map(function(e){return e.name})).rangeRound([o.options.chart_padding_left,o.options.chart_width-o.options.chart_padding_right]).padding(.2),o.y_scale=d3.scaleLinear().domain([0,d3.max(t,function(e){return e.data})]).rangeRound([o.options.chart_height-o.options.chart_padding_bottom,o.options.chart_padding_top]),o.bar_chart.selectAll("rect").data(t).enter().append("rect").attr("x",function(e,t){return o.x_scale(e.name)}).attr("y",function(e,t){return o.y_scale(e.data)}).attr("width",o.x_scale.bandwidth()).attr("height",function(e,t){return o.options.chart_height-o.options.chart_padding_bottom-o.y_scale(e.data)}).attr("fill",o.options.rect_color).on("mouseover",function(e){var t=parseFloat(d3.select(this).attr("x"))*(parseFloat(o.bar_chart.style("width"))/o.options.chart_width)+o.x_scale.bandwidth()/2,a=parseFloat(d3.select(this).attr("y"))*(parseFloat(o.bar_chart.style("height"))/o.options.chart_height)/3+parseFloat(o.bar_chart.style("height"))/2;d3.select("#tooltip2").style("left",t+"px").style("top",a+"px").style("display","block").style("white-space","pre-line").text(e.name+": \n "+e.data)}).on("mouseout",function(){d3.select("#tooltip2").style("display","none")}),o.x_axis=d3.axisBottom(o.x_scale),o.bar_chart.append("g").attr("class","x-axis").attr("transform","translate(0,"+(o.options.chart_height-o.options.chart_padding_bottom)+")").attr("color","#000").call(o.x_axis).selectAll("text").attr("transform",o.options.rotateX?"rotate(25)":"rotate(0)").attr("text-anchor",o.options.rotateX?"start":"middle").attr("font-size",o.options.x_axes_font_size).attr("class","x_label_text"),o.y_axis=d3.axisLeft(o.y_scale),o.bar_chart.append("g").attr("class","y-axis").attr("transform","translate("+o.options.chart_padding_left+",0)").attr("color","#000").call(o.y_axis).selectAll("text").attr("font-size",o.options.y_axes_font_size).attr("class","y_label_text"),o.options.label_font_size=Math.ceil(o.x_scale.bandwidth()/3)>12?Math.ceil(o.x_scale.bandwidth()/3):14,o.bar_chart.append("g").attr("class","labels").selectAll("text").data(t).enter().append("text").text(function(e,t){return e.data}).attr("x",function(e,t){return o.x_scale(e.name)+o.x_scale.bandwidth()/2}).attr("y",function(e,t){return o.options.chart_height-o.options.chart_padding_bottom-o.y_scale(e.data)<1.5*o.options.label_font_size?o.y_scale(e.data)-o.options.label_font_size/2:o.y_scale(e.data)+1.2*o.options.label_font_size}).attr("font-size",o.options.label_font_size).attr("fill",function(e,t){return o.options.chart_height-o.options.chart_padding_bottom-o.y_scale(e.data)<1.5*o.options.label_font_size?"#000":"#FFF"}).attr("text-anchor","middle").attr("font-weight","bold").style("pointer-events","none"),o.bar_chart.append("text").attr("x",o.options.chart_width/2).attr("y",o.options.chart_padding_top/2).style("text-anchor","middle").style("font-size",22).attr("font-weight","bold").text(o.options.title),o.bar_chart.append("text").attr("x",o.options.chart_width/2).attr("y",o.options.rotateX?o.options.chart_height-.1*o.options.chart_padding_bottom:o.options.chart_height-.5*o.options.chart_padding_bottom).style("text-anchor","middle").style("font-size",20).attr("font-weight","bold").text(o.options.x_title),o.bar_chart.append("text").attr("transform","rotate(-90)").attr("y",o.options.chart_padding_left/2-o.options.axes_font_size).attr("x",-o.options.chart_height/2).attr("dy","1em").style("text-anchor","middle").style("font-size",20).attr("font-weight","bold").text(o.options.y_title),o.initialized=!0},loadData:function(){var e=o.data;o.x_scale=d3.scaleBand().domain(e.map(function(e){return e.name})).rangeRound([o.options.chart_padding_left,o.options.chart_width-o.options.chart_padding_right]).padding(.2),o.y_scale=d3.scaleLinear().domain([0,d3.max(e,function(e){return e.data})]).rangeRound([o.options.chart_height-o.options.chart_padding_bottom,o.options.chart_padding_top]),o.x_axis=d3.axisBottom(o.x_scale),o.bar_chart.select(".x-axis").transition().duration(800).attr("transform","translate(0,"+(o.options.chart_height-o.options.chart_padding_bottom)+")").attr("color","#000").call(o.x_axis).selectAll("text").attr("class","x_label_text").attr("font-size",o.options.x_axes_font_size),o.y_axis=d3.axisLeft(o.y_scale),o.bar_chart.select(".y-axis").transition().duration(800).attr("transform","translate("+o.options.chart_padding_left+",0)").attr("color","#000").call(o.y_axis).selectAll("text").attr("class","y_label_text").attr("font-size",o.options.y_axes_font_size),o.options.label_font_size=Math.ceil(o.x_scale.bandwidth()/3)>12?Math.ceil(o.x_scale.bandwidth()/3):14,o.bar_chart.selectAll("rect").data(e).transition().duration(800).attr("y",function(e,t){return o.y_scale(e.data)}).attr("height",function(e,t){return o.options.chart_height-o.options.chart_padding_bottom-o.y_scale(e.data)}).attr("fill",o.options.rect_color),o.bar_chart.selectAll(".labels text").data(e).transition().duration(800).text(function(e,t){return e.data}).attr("y",function(e,t){return o.options.chart_height-o.options.chart_padding_bottom-o.y_scale(e.data)<1.5*o.options.label_font_size?o.y_scale(e.data)-o.options.label_font_size/2:o.y_scale(e.data)+1.2*o.options.label_font_size}).attr("fill",function(e,t){return o.options.chart_height-o.options.chart_padding_bottom-o.y_scale(e.data)<1.5*o.options.label_font_size?"#000":"#FFF"}).attr("text-anchor","middle").attr("font-weight","bold")},sortData:function(e){"A->Z"===e?o.data.sort(function(e,t){var a=e.name.toUpperCase(),o=t.name.toUpperCase();return a<o?-1:a>o?1:0}):"Z->A"===e?o.data.sort(function(e,t){var a=e.name.toUpperCase(),o=t.name.toUpperCase();return a<o?1:a>o?-1:0}):"ASC"===e?o.data.sort(function(e,t){return e.data-t.data}):"DESC"===e&&o.data.sort(function(e,t){return t.data-e.data});var t=o.data;o.x_scale=d3.scaleBand().domain(t.map(function(e){return e.name})).rangeRound([o.options.chart_padding_left,o.options.chart_width-o.options.chart_padding_right]).padding(.2),o.y_scale=d3.scaleLinear().domain([0,d3.max(t,function(e){return e.data})]).rangeRound([o.options.chart_height-o.options.chart_padding_bottom,o.options.chart_padding_top]),o.x_axis=d3.axisBottom(o.x_scale),o.bar_chart.select(".x-axis").transition().duration(800).attr("transform","translate(0,"+(o.options.chart_height-o.options.chart_padding_bottom)+")").attr("color","#000").call(o.x_axis).selectAll("text").attr("class","x_label_text"),o.y_axis=d3.axisLeft(o.y_scale),o.bar_chart.select(".y-axis").transition().duration(800).attr("transform","translate("+o.options.chart_padding_left+",0)").attr("color","#000").call(o.y_axis).selectAll("text"),o.options.label_font_size=Math.ceil(o.x_scale.bandwidth()/3)>12?Math.ceil(o.x_scale.bandwidth()/3):12,o.bar_chart.selectAll("rect").data(t).transition().duration(800).attr("y",function(e,t){return o.y_scale(e.data)}).attr("height",function(e,t){return o.options.chart_height-o.options.chart_padding_bottom-o.y_scale(e.data)}).attr("fill",o.options.rect_color),o.bar_chart.selectAll(".labels text").data(t).transition().duration(800).text(function(e,t){return e.data}).attr("y",function(e,t){return o.options.chart_height-o.options.chart_padding_bottom-o.y_scale(e.data)<1.5*o.options.label_font_size?o.y_scale(e.data)-o.options.label_font_size/2:o.y_scale(e.data)+1.2*o.options.label_font_size}).attr("fill",function(e,t){return o.options.chart_height-o.options.chart_padding_bottom-o.y_scale(e.data)<1.5*o.options.label_font_size?"#000":"#FFF"}).attr("text-anchor","middle")},resetData:function(){var e=o.data.map(function(e){var t=JSON.parse(JSON.stringify(e));return t.data=0,t});o.x_scale=d3.scaleBand().domain(e.map(function(e){return e.name})).rangeRound([o.options.chart_padding_left,o.options.chart_width-o.options.chart_padding_right]).padding(.2),o.y_scale=d3.scaleLinear().domain([0,d3.max(e,function(e){return e.data})]).rangeRound([o.options.chart_height-o.options.chart_padding_bottom,o.options.chart_padding_top]),o.x_axis=d3.axisBottom(o.x_scale),o.bar_chart.select(".x-axis").transition().duration(400).attr("transform","translate(0,"+(o.options.chart_height-o.options.chart_padding_bottom)+")").attr("color","#000").call(o.x_axis).selectAll("text").attr("class","x_label_text"),o.y_axis=d3.axisLeft(o.y_scale),o.bar_chart.select(".y-axis").transition().duration(400).attr("transform","translate("+o.options.chart_padding_left+",0)").attr("color","#000").call(o.y_axis).selectAll("text"),o.options.label_font_size=Math.ceil(o.x_scale.bandwidth()/3)>12?Math.ceil(o.x_scale.bandwidth()/3):12,o.bar_chart.selectAll("rect").data(e).transition().duration(400).attr("y",function(e,t){return o.y_scale(e.data)}).attr("height",function(e,t){return o.options.chart_height-o.options.chart_padding_bottom-o.y_scale(e.data)}).attr("fill",o.options.rect_color),o.bar_chart.selectAll(".labels text").data(e).transition().duration(400).text(function(e,t){return e.data}).attr("y",function(e,t){return o.options.chart_height-o.options.chart_padding_bottom-o.y_scale(e.data)<1.5*o.options.label_font_size?o.y_scale(e.data)-o.options.label_font_size/2:o.y_scale(e.data)+1.2*o.options.label_font_size}).attr("fill",function(e,t){return o.options.chart_height-o.options.chart_padding_bottom-o.y_scale(e.data)<1.5*o.options.label_font_size?"#000":"#FFF"}).attr("text-anchor","middle")}}})(e+" .chart",t,{title:"My Title",x_title:"x_title",y_title:"y_title"}).init()}}}(),i=function(e,t){var a={modifyTable:{currentAssessment:null,currentRow:null,table:null},assessorTable:{currentAssessment:null,currentRow:null,table:null},usingSP:!1,currentUser:null,lastreLoad:null},o=[{active:!1,eleID:"K_vendorName",colName:"Third_x0020_Party_x0020_Name",btnID:"btn-1",uiColName:null},{active:!0,eleID:"K_LOB",colName:"LOB",btnID:"btn-2",uiColName:"Line of Business"},{active:!0,eleID:"K_orderNum",colName:"OrderNumber",btnID:"btn-3",uiColName:null},{active:!0,eleID:"K_Tier",colName:"Tier",btnID:"btn-4",uiColName:null},{active:!0,eleID:"K_dateStarted",colName:"DateIQUploaded",btnID:"btn-5",uiColName:"Date Started"},{active:!0,eleID:"K_workOrderNum",colName:"SMCWorkOrderNumber",btnID:"btn-6",uiColName:null},{active:!0,eleID:"K_infoClass",colName:"DataClassification",btnID:"btn-7",uiColName:null},{active:!0,eleID:"K_assessor",colName:"ControlAssessor",btnID:"btn-8",uiColName:"Controls Assessor"},{active:!0,eleID:"K_projectName",colName:"ProjectName",btnID:"btn-9",uiColName:null},{active:!1,eleID:"K_generalStatus",colName:"",btnID:"btn-10",uiColName:null},{active:!0,eleID:"K_actionNeeded",colName:"TSr_x0020_Status",btnID:"btn-11",uiColName:"TSR Status"},{active:!0,eleID:"K_commentsWeek1",colName:"CommentWeek1",btnID:"btn-12",uiColName:null},{active:!0,eleID:"K_commentsWeek2",colName:"CommentWeek2",btnID:"btn-13",uiColName:null},{active:!0,eleID:"K_commentsWeek3",colName:"CommentWeek3",btnID:"btn-14",uiColName:null},{active:!0,eleID:"K_commentsWeek4",colName:"CommentWeek4",btnID:"btn-15",uiColName:null},{active:!0,eleID:"K_commentsWeek5",colName:"CommentWeek5",btnID:"btn-16",uiColName:null},{active:!0,eleID:"K_commentsWeek6",colName:"CommentWeek6",btnID:"btn-17",uiColName:null},{active:!0,eleID:"K_commentsWeek7",colName:"CommentWeek7",btnID:"btn-18",uiColName:null},{active:!0,eleID:"K_assessorNotes",colName:"AssessorFinalNotes",btnID:"btn-19",uiColName:null},{active:!0,eleID:"K_remediationStatus",colName:"Remediation_Status",btnID:"btn-20",uiColName:null},{active:!0,eleID:"K_remediationNotes",colName:"Remediation_Notes",btnID:"btn-21",uiColName:null}],i=[{active:!1,eleID:"K_generalStatus_2",colName:"",btnID:"btn-10",uiColName:null},{active:!0,eleID:"K_actionNeeded_2",colName:"TSr_x0020_Status",btnID:"btn-31",uiColName:"TSR Status"},{active:!0,eleID:"K_commentsWeek1_2",colName:"CommentWeek1",btnID:"btn-32",uiColName:null},{active:!0,eleID:"K_commentsWeek2_2",colName:"CommentWeek2",btnID:"btn-33",uiColName:null},{active:!0,eleID:"K_commentsWeek3_2",colName:"CommentWeek3",btnID:"btn-34",uiColName:null},{active:!0,eleID:"K_commentsWeek4_2",colName:"CommentWeek4",btnID:"btn-35",uiColName:null},{active:!0,eleID:"K_commentsWeek5_2",colName:"CommentWeek5",btnID:"btn-36",uiColName:null},{active:!0,eleID:"K_commentsWeek6_2",colName:"CommentWeek6",btnID:"btn-37",uiColName:null},{active:!0,eleID:"K_commentsWeek7_2",colName:"CommentWeek7",btnID:"btn-38",uiColName:null},{active:!0,eleID:"K_assessorNotes_2",colName:"AssessorFinalNotes",btnID:"btn-39",uiColName:null},{active:!0,eleID:"K_remediationStatus_2",colName:"Remediation_Status",btnID:"btn-40",uiColName:null},{active:!0,eleID:"K_remediationNotes_2",colName:"Remediation_Notes",btnID:"btn-41",uiColName:null}];function r(e){var t;return["January","February","March","April","May","June","July","August","September","October","November","December"].forEach(function(a,o){a===e&&(t=o)}),t}function l(e,t){var a=[{name:"Corporate Services",data:0},{name:"Customer Care & CRE",data:0},{name:"Electric Operations",data:0},{name:"Ethics & Compliance",data:0},{name:"Finance & Risk",data:0},{name:"Gas Operations",data:0},{name:"General Counsel/Law",data:0},{name:"Generation",data:0},{name:"Human Resources",data:0},{name:"Information Technology & Supply Chain",data:0},{name:"Pres/ CEO /COO",data:0},{name:"Safety Health and Enterprise",data:0},{name:"Strategy & Policy",data:0}],o=_.groupBy(e,function(e){return new Date(e.DateIQUploaded).getFullYear()}),n={byTier:[],byMonth:[],byLOB:[],byTierHighLOB:[],total:null};return n.total=o[t].length,n.byTier=_.groupBy(o[t],function(e){return e.Tier}),n.byTierHighLOB=_.cloneDeep(n.byTier),n.byTier=_.mapKeys(n.byTier,function(e,t){return"Tier "+t}),n.byTier=_.mapValues(n.byTier,"length"),n.byTier=_.map(n.byTier,function(e,t,a){return{name:t,data:e}}),n.byMonth=_.groupBy(o[t],function(e){return new Date(e.DateIQUploaded).getMonthName()}),n.byMonth=_.mapValues(n.byMonth,"length"),n.byMonth=_.map(n.byMonth,function(e,t,a){return{name:t,data:e}}),n.byMonth=_.unionWith(n.byMonth,[{name:"January",data:0},{name:"February",data:0},{name:"March",data:0},{name:"April",data:0},{name:"May",data:0},{name:"June",data:0},{name:"July",data:0},{name:"August",data:0},{name:"September",data:0},{name:"October",data:0},{name:"November",data:0},{name:"December",data:0}],function(e,t){return e.name===t.name}),n.byMonth=_.orderBy(n.byMonth,function(e){return r(e.name)},["asc"]),n.byLOB=_.groupBy(o[t],function(e){return e.LOBName.Title}),n.byLOB=_.mapValues(n.byLOB,"length"),n.byLOB=_.map(n.byLOB,function(e,t,a){return{name:t,data:e}}),n.byLOB=_.unionWith(n.byLOB,a,function(e,t){return e.name===t.name}),n.byLOB=_.map(n.byLOB,function(e,t){return"Information Technology & Supply Chain"===e.name?e.name="IT & Supply Chain":"Safety Health and Enterprise"===e.name&&(e.name="Safety & Health"),e}),n.byLOB=_.orderBy(n.byLOB,["name"],["asc"]),n.byTierHighLOB=_.groupBy(n.byTierHighLOB[1],function(e){return e.LOBName.Title}),n.byTierHighLOB=_.mapValues(n.byTierHighLOB,"length"),n.byTierHighLOB=_.map(n.byTierHighLOB,function(e,t,a){return{name:t,data:e}}),n.byTierHighLOB=_.unionWith(n.byTierHighLOB,a,function(e,t){return e.name===t.name}),n.byTierHighLOB=_.map(n.byTierHighLOB,function(e,t){return"Information Technology & Supply Chain"===e.name?e.name="IT & Supply Chain":"Safety Health and Enterprise"===e.name&&(e.name="Safety & Health"),e}),n.byTierHighLOB=_.orderBy(n.byTierHighLOB,["name"],["asc"]),n}function d(e,t){var a=_.orderBy(_.filter(_.map(_.groupBy(e,function(e){return e.LOBName.Title}),function(e,t,a){return{name:t,data:0}}),function(e){return"Energy Supply"!==e.name}),["name"],["asc"]),o=[{x:"January",y:0},{x:"February",y:0},{x:"March",y:0},{x:"April",y:0},{x:"May",y:0},{x:"June",y:0},{x:"July",y:0},{x:"August",y:0},{x:"September",y:0},{x:"October",y:0},{x:"November",y:0},{x:"December",y:0}],n=_.groupBy(e,function(e){return new Date(e.DateIQUploaded).getFullYear()}),s={byTier:[],byLOBTime:[],byMonth:[],byLOB:[],total:null};return s.total=n[t].length,s.byTier=_.groupBy(n[t],function(e){return e.Tier}),delete s.byTier.null,s.byTier=_.mapKeys(s.byTier,function(e,t){return"Tier "+t}),_.has(s.byTier,"Tier 1")||(s.byTier["Tier 1"]=[],console.log("No Tier 1s found")),_.has(s.byTier,"Tier 2")||(s.byTier["Tier 2"]=[]),_.has(s.byTier,"Tier 3")||(s.byTier["Tier 3"]=[]),_.has(s.byTier,"Tier 4")||(s.byTier["Tier 4"]=[]),s.byTier=_.mapValues(s.byTier,function(e,t,o){return{total:e.length,items:_.orderBy(_.unionWith(_.map(_.mapValues(_.groupBy(e,function(e){return e.LOBName.Title}),"length"),function(e,t,a){return{name:t,data:e}}),a,function(e,t){return e.name===t.name}),["name"],["asc"])}}),s.byLOB=_.groupBy(n[t],function(e){return e.LOBName.Title}),s.byLOB=_.map(s.byLOB,function(e,t,a){return{name:t,data:e.length}}),s.byLOB=_.unionWith(s.byLOB,a,function(e,t){return e.name===t.name}),s.byLOBTime=_.groupBy(n[t],function(e){return e.LOBName.Title}),s.byLOBTime=_.mapValues(s.byLOBTime,function(e,t,a){return _.orderBy(_.unionWith(_.map(_.mapValues(_.groupBy(e,function(e){return new Date(e.DateIQUploaded).getMonthName()}),"length"),function(e,t,a){return{x:t,y:e}}),o,function(e,t){return e.x===t.x}),function(e){return r(e.x)},["asc"]).sort(function(e,t){return new Date(e.x)-new Date(t.x)})}),s.byMonth=_.groupBy(n[t],function(e){return new Date(e.DateIQUploaded).getMonthName()}),s.byMonth=_.mapValues(s.byMonth,"length"),s.byMonth=_.map(s.byMonth,function(e,t,a){return{x:t,y:e}}),s.byMonth=_.unionWith(s.byMonth,o,function(e,t){return e.x===t.x}),s.byMonth=_.orderBy(s.byMonth,function(e){return r(e.x)},["asc"]),s}return{initialize:function(){var o={s:{animLen:200},init:function(){o.bindUIActions(),o.hideInactive()},bindUIActions:function(){$(".tabBlock-tabs").on("click",".tabBlock-tab",function(){o.switchTab($(this))})},hideInactive:function(){var e=$(".tabBlock");e.each(function(t){var a=$(e[t]),o=a.find(".tabBlock-pane"),n=a.find(".tabBlock-tab.is-active");o.hide(),$(o[n.index()]).show()})},switchTab:function(e){var t=e.closest(".tabBlock");e.hasClass("is-active")||(e.siblings().removeClass("is-active"),e.addClass("is-active"),o.showPane(e.index(),t))},showPane:function(e,a){var n=a.children(".tabBlock-content").children(".tabBlock-pane");n.slideUp(o.s.animLen),$(n[e]).slideDown(o.s.animLen,function(){1===$(this).has("#modifyTable_id").length&&t.modifyTableAutoAdjust(),1===$(this).has("#assessorTable_id").length&&t.assessorTableAutoAdjust()})}};o.init(),t.initialzie(function(){e.getModifyTableData(a.usingSP,function(e){t.renderModifyTableData(e)})},function(){e.getAssessorTableData(a.usingSP,a.currentUser,function(e){t.renderAssessorTableData(e)})}),$("#K_dateStarted").datepicker(),$(".ui.accordion").accordion(),n.getAllDepartments(a.usingSP,function(e){e.reduce(function(e,t,a,o){return!1===t.ReOrgOut&&e.push(t.Title),e},[]).forEach(function(e){$("#K_LOB").append("<option>"+e+"</option>")})}),n.getAllUsers(a.usingSP,function(e){e.reduce(function(e,t,a,o){return"Yes"===t.Active&&"N/A"!==t.Assessment&&e.push(t.Assessment),e},[]).forEach(function(e){$("#K_assessor").append("<option>"+e.toUpperCase()+"</option>")})})},setButtons:function(){o.forEach(function(o){o.active&&$("#"+o.btnID).click(function(){if(null!==a.modifyTable.currentAssessment){var n=$("#"+o.eleID).val();if("DateIQUploaded"===o.colName)n=(n=new Date(n)).toISOString(),e.postSingleAssessment(a.usingSP,a.modifyTable.currentAssessment,o.colName,n,function(o){e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){a.modifyTable.currentRow.data(t.returnFormatTableRow("modify",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})});else if("TSr_x0020_Status"===o.colName)if("LOB to ensure vendor mitigates deficient controls."===n)e.getAssessmentInformation(a.usingSP,"ID",a.modifyTable.currentAssessment,"tblAssessments",function(o){var n={};7===o.LOBNameId?n.ControlAssessor="DLKT":n.ControlAssessor="M2O1";var s=new Date;n.TSr_x0020_Status="Review Complete",n.Remediation_Needed="Yes",n.Remediation_Status="Remediation in progress",n.DateComplete=s.toISOString(),n.Remediation_Date_Start=s.toISOString(),e.mergeAssessmentInformation(a.usingSP,a.modifyTable.currentAssessment,n,"tblAssessments",function(){e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){a.modifyTable.currentRow.data(t.returnFormatTableRow("modify",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})});else if("Review Complete"===n){var s={},i=new Date;s.TSr_x0020_Status="Review Complete",s.Remediation_Needed="No",s.DateComplete=i.toISOString(),e.mergeAssessmentInformation(a.usingSP,a.modifyTable.currentAssessment,s,"tblAssessments",function(){e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){a.modifyTable.currentRow.data(t.returnFormatTableRow("modify",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})}else if("No TSR Required"===n){s={},i=new Date;s.TSr_x0020_Status="No TSR Required",s.Remediation_Needed="No",s.DateComplete=i.toISOString(),e.mergeAssessmentInformation(a.usingSP,a.modifyTable.currentAssessment,s,"tblAssessments",function(){e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){a.modifyTable.currentRow.data(t.returnFormatTableRow("modify",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})}else if("Review Cancelled"===n){s={},i=new Date;s.TSr_x0020_Status="Review Cancelled",s.Remediation_Needed="No",s.DateComplete=i.toISOString(),e.mergeAssessmentInformation(a.usingSP,a.modifyTable.currentAssessment,s,"tblAssessments",function(){e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){a.modifyTable.currentRow.data(t.returnFormatTableRow("modify",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})}else e.postSingleAssessment(a.usingSP,a.modifyTable.currentAssessment,o.colName,n,function(o){e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){a.modifyTable.currentRow.data(t.returnFormatTableRow("modify",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})});else if("Remediation_Status"===o.colName)if("Remediation Complete"===n||"Remediation Cancelled"===n){s={},i=new Date;s.Remediation_Status=n,s.Remediation_Date_Complete=i.toISOString(),e.mergeAssessmentInformation(a.usingSP,a.modifyTable.currentAssessment,s,"tblAssessments",function(){e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){a.modifyTable.currentRow.data(t.returnFormatTableRow("modify",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})}else e.postSingleAssessment(a.usingSP,a.modifyTable.currentAssessment,o.colName,n,function(o){e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){a.modifyTable.currentRow.data(t.returnFormatTableRow("modify",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})});else if("LOB"===o.colName){var r=encodeURI(n);r=(r=r.replace("&","%26")).replace("'","%27%27"),e.getAssessmentInformation(a.usingSP,"Title","'"+r+"'","tblLOB",function(o){var s={};s.LOBName=o.ID,s.LOBNameId=o.ID,s.LOB_x0020_ID=o.ID,s.LOB=n,e.mergeAssessmentInformation(a.usingSP,a.modifyTable.currentAssessment,s,"tblAssessments",function(){e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){a.modifyTable.currentRow.data(t.returnFormatTableRow("modify",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})})}else"Tier"===o.colName?e.getAssessmentInformation(a.usingSP,"Assessment",a.modifyTable.currentAssessment,"tblIQInformation",function(s){var i={};i.Assessment_x0020_Type=n,e.mergeAssessmentInformation(a.usingSP,s.Id,i,"tblIQInformation",function(){e.postSingleAssessment(a.usingSP,a.modifyTable.currentAssessment,o.colName,n,function(o){e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){a.modifyTable.currentRow.data(t.returnFormatTableRow("modify",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})})}):"DataClassification"===o.colName?e.getAssessmentInformation(a.usingSP,"Assessment",a.modifyTable.currentAssessment,"tblIQInformation",function(s){var i={};i.Information_x0020_Classification=n,e.mergeAssessmentInformation(a.usingSP,s.Id,i,"tblIQInformation",function(){e.postSingleAssessment(a.usingSP,a.modifyTable.currentAssessment,o.colName,n,function(o){e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){a.modifyTable.currentRow.data(t.returnFormatTableRow("modify",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})})}):e.postSingleAssessment(a.usingSP,a.modifyTable.currentAssessment,o.colName,n,function(o){e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){a.modifyTable.currentRow.data(t.returnFormatTableRow("modify",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})}else $.toast({heading:"Warning",text:"Please click an assessment",showHideTransition:"plain",icon:"warning",position:"bottom-right"})})}),i.forEach(function(o){o.active&&$("#"+o.btnID).click(function(){if(null!==a.assessorTable.currentAssessment){var n=$("#"+o.eleID).val();if("TSr_x0020_Status"===o.colName)if("LOB to ensure vendor mitigates deficient controls."===n)e.getAssessmentInformation(a.usingSP,"ID",a.assessorTable.currentAssessment,"tblAssessments",function(o){var n={};7===o.LOBNameId?n.ControlAssessor="DLKT":n.ControlAssessor="M2O1";var s=new Date;n.TSr_x0020_Status="Review Complete",n.Remediation_Needed="Yes",n.Remediation_Status="Remediation in progress",n.DateComplete=s.toISOString(),n.Remediation_Date_Start=s.toISOString(),e.mergeAssessmentInformation(a.usingSP,a.assessorTable.currentAssessment,n,"tblAssessments",function(){e.getSingleModifyAssessment(a.usingSP,a.assessorTable.currentAssessment,function(e){a.assessorTable.currentRow.data(t.returnFormatTableRow("assessor",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})});else if("Review Complete"===n){var s={},i=new Date;s.TSr_x0020_Status="Review Complete",s.Remediation_Needed="No",s.DateComplete=i.toISOString(),e.mergeAssessmentInformation(a.usingSP,a.assessorTable.currentAssessment,s,"tblAssessments",function(){e.getSingleModifyAssessment(a.usingSP,a.assessorTable.currentAssessment,function(e){a.assessorTable.currentRow.data(t.returnFormatTableRow("assessor",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})}else if("No TSR Required"===n){s={},i=new Date;s.TSr_x0020_Status="No TSR Required",s.Remediation_Needed="No",s.DateComplete=i.toISOString(),e.mergeAssessmentInformation(a.usingSP,a.assessorTable.currentAssessment,s,"tblAssessments",function(){e.getSingleModifyAssessment(a.usingSP,a.assessorTable.currentAssessment,function(e){a.assessorTable.currentRow.data(t.returnFormatTableRow("assessor",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})}else if("Review Cancelled"===n){s={},i=new Date;s.TSr_x0020_Status="Review Cancelled",s.Remediation_Needed="No",s.DateComplete=i.toISOString(),e.mergeAssessmentInformation(a.usingSP,a.assessorTable.currentAssessment,s,"tblAssessments",function(){e.getSingleModifyAssessment(a.usingSP,a.assessorTable.currentAssessment,function(e){a.assessorTable.currentRow.data(t.returnFormatTableRow("assessor",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})}else e.postSingleAssessment(a.usingSP,a.assessorTable.currentAssessment,o.colName,n,function(o){e.getSingleModifyAssessment(a.usingSP,a.assessorTable.currentAssessment,function(e){a.assessorTable.currentRow.data(t.returnFormatTableRow("assessor",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})});else if("Remediation_Status"===o.colName)if("Remediation Complete"===n||"Remediation Cancelled"===n){s={},i=new Date;s.Remediation_Status=n,s.Remediation_Date_Complete=i.toISOString(),e.mergeAssessmentInformation(a.usingSP,a.assessorTable.currentAssessment,s,"tblAssessments",function(){e.getSingleModifyAssessment(a.usingSP,a.assessorTable.currentAssessment,function(e){a.assessorTable.currentRow.data(t.returnFormatTableRow("assessor",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})}else e.postSingleAssessment(a.usingSP,a.assessorTable.currentAssessment,o.colName,n,function(o){e.getSingleModifyAssessment(a.usingSP,a.assessorTable.currentAssessment,function(e){a.assessorTable.currentRow.data(t.returnFormatTableRow("assessor",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})});else e.postSingleAssessment(a.usingSP,a.assessorTable.currentAssessment,o.colName,n,function(o){e.getSingleModifyAssessment(a.usingSP,a.assessorTable.currentAssessment,function(e){a.assessorTable.currentRow.data(t.returnFormatTableRow("assessor",e)),$.toast({heading:"Update Successful",showHideTransition:"plain",icon:"success",position:"bottom-right"})})})}else $.toast({heading:"Warning",text:"Please click an assessment",showHideTransition:"plain",icon:"warning",position:"bottom-right"})})})},setTables:function(){$("#modifyTable_id tbody").on("click","tr",function(){$(this).hasClass("row__selected")||(t.modifyTableReference().$("tr.row__selected").removeClass("row__selected"),$(this).addClass("row__selected")),a.modifyTable.currentAssessment=t.modifyTableReference().row(this).data().ID,a.modifyTable.currentRow=t.modifyTableReference().row(this),e.getSingleModifyAssessment(a.usingSP,a.modifyTable.currentAssessment,function(e){t.renderModifyElements(e)})}),$("#assessorTable_id tbody").on("click","tr",function(){$(this).hasClass("row__selected")||(t.assessorTableReference().$("tr.row__selected").removeClass("row__selected"),$(this).addClass("row__selected")),a.assessorTable.currentAssessment=t.assessorTableReference().row(this).data().ID,a.assessorTable.currentRow=t.assessorTableReference().row(this),e.getSingleModifyAssessment(a.usingSP,a.assessorTable.currentAssessment,function(e){t.renderAssessorElements(e)})})},loadAllTableData:function(){e.getModifyTableData(a.usingSP,function(e){t.renderModifyTableData(e)}),e.getCurrentUser(a.usingSP,function(o){a.currentUser=o,e.getAssessorTableData(a.usingSP,a.currentUser,function(e){t.renderAssessorTableData(e)})})},setCurrentAssessment:function(e){a.currentAssessment=e},getCurrentAssessment:function(){return a.currentAssessment},setReport:function(){n.getReportData(a.usingSP,function(e){var t=new Date;t=t.getFullYear();var a={"Customer Care & CRE":"#e6194B","Information Technology & Supply Chain":"#3cb44b","Human Resources":"#ffe119","Gas Operations":"#4363d8","Electric Operations":"#f58231","Corporate Services":"#fabebe","Finance & Risk":"#911eb4","Safety Health and Enterprise":"#42d4f4",Generation:"#f032e6","Pres/ CEO /COO":"#bfef45","Ethics & Compliance":"#469990","General Counsel/Law":"#e6beff","Strategy & Policy":"#800000","Department 1":"#e6194B","Department 2":"#3cb44b","Department 3":"#ffe119","Department 4":"#4363d8","Department 5":"#fabebe"},o={"Tier 1":{backgroundColor:"#EBCCD1",borderColor:"RGB(156, 0, 6)"},"Tier 2":{backgroundColor:"#ffe0cc",borderColor:"#ff6600"},"Tier 3":{backgroundColor:"#FAEBCC",borderColor:"RGB(156, 101, 0)"},"Tier 4":{backgroundColor:"#D6E9C6",borderColor:"RGB(0, 97, 0)"}},n=Chart.helpers,i=function(e){var t=[{name:"Corporate Services",data:0},{name:"Customer Care & CRE",data:0},{name:"Electric Operations",data:0},{name:"Ethics & Compliance",data:0},{name:"Finance & Risk",data:0},{name:"Gas Operations",data:0},{name:"General Counsel/Law",data:0},{name:"Generation",data:0},{name:"Human Resources",data:0},{name:"Information Technology & Supply Chain",data:0},{name:"Pres/ CEO /COO",data:0},{name:"Safety Health and Enterprise",data:0},{name:"Strategy & Policy",data:0}],a=[{name:"Corporate Services",data:0},{name:"Customer Care & CRE",data:0},{name:"Electric Operations",data:0},{name:"Ethics & Compliance",data:0},{name:"Finance & Risk",data:0},{name:"Gas Operations",data:0},{name:"General Counsel/Law",data:0},{name:"Generation",data:0},{name:"Human Resources",data:0},{name:"Information Technology & Supply Chain",data:0},{name:"Pres/ CEO /COO",data:0},{name:"Safety Health and Enterprise",data:0},{name:"Strategy & Policy",data:0}],o=[{name:"Tier 1",data:0},{name:"Tier 2",data:0},{name:"Tier 3",data:0},{name:"Tier 4",data:0}],n=[{name:"Tier 1",data:0},{name:"Tier 2",data:0},{name:"Tier 3",data:0},{name:"Tier 4",data:0}],s=new Date;s=s.getFullYear();var i=0,r=0,l=0,d=0,m=null,c=null,u=null,p=null,_=null,f=null,h=[];return e.forEach(function(e){if(new Date(e.DateIQUploaded),m=new Date(e.DateIQUploaded),c=new Date(e.DateComplete),e.Remediation_Needed,u=e.TSr_x0020_Status,p=e.Remediation_Status,_=new Date(e.Remediation_Date_Start),f=new Date(e.Remediation_Date_Complete),m.getFullYear()===s||c.getFullYear()===s&&"Certificate/report  Valid"!==u||_.getFullYear()===s||f.getFullYear()===s||"Review Complete"!==u&&"Review Cancelled"!==u&&"On Hold"!==u&&"On Site Assessment Complete"!==u&&"No TSR Required"!==u&&"Certificate/report  Valid"!==u&&null!==u||"Review Complete"===u&&"Remediation Complete"!==p&&"Remediation Cancelled"!==p&&null!==p){if("Review Complete"!==u&&"Review Cancelled"!==u&&"On Hold"!==u&&"On Site Assessment Complete"!==u&&"No TSR Required"!==u||"Review Complete"===u&&"Remediation Complete"!==p&&"Remediation Cancelled"!==p&&null!==p){switch("Review Complete"!==u&&"Review Cancelled"!==u&&"On Hold"!==u&&"On Site Assessment Complete"!==u&&"No TSR Required"!==u&&l++,"Review Complete"===u&&"Remediation Complete"!==p&&"Remediation Cancelled"!==p&&null!==p&&d++,e.Tier){case 1:n[0].data++;break;case 2:n[1].data++;break;case 3:n[2].data++;break;case 4:n[3].data++}h.push(e.ID),r++}else switch(e.Tier){case 1:o[0].data++;break;case 2:o[1].data++;break;case 3:o[2].data++;break;case 4:o[3].data++}if(1===e.Tier)switch(e.LOBName.Title){case"Corporate Services":a[0].data++;break;case"Customer Care & CRE":a[1].data++;break;case"Electric Operations":a[2].data++;break;case"Ethics & Compliance":a[3].data++;break;case"Finance & Risk":a[4].data++;break;case"Gas Operations":a[5].data++;break;case"General Counsel/Law":a[6].data++;break;case"Generation":a[7].data++;break;case"Human Resources":a[8].data++;break;case"Information Technology & Supply Chain":a[9].data++;break;case"Pres/ CEO /COO":a[10].data++;break;case"Safety Health and Enterprise":a[11].data++;break;case"Strategy & Policy":a[12].data++}switch(e.LOBName.Title){case"Corporate Services":t[0].data++;break;case"Customer Care & CRE":t[1].data++;break;case"Electric Operations":t[2].data++;break;case"Ethics & Compliance":t[3].data++;break;case"Finance & Risk":t[4].data++;break;case"Gas Operations":t[5].data++;break;case"General Counsel/Law":t[6].data++;break;case"Generation":t[7].data++;break;case"Human Resources":t[8].data++;break;case"Information Technology & Supply Chain":t[9].data++;break;case"Pres/ CEO /COO":t[10].data++;break;case"Safety Health and Enterprise":t[11].data++;break;case"Strategy & Policy":t[12].data++}i++}}),t[9].name="IT & Supply Chain",t[11].name="Safety & Health",a[9].name="IT & Supply Chain",a[11].name="Safety & Health",{active:r,review:l,remediation:d,complete:i-r,total:i,activeByTier:n,completeByTier:o,byLOB:t,byTier1LOB:a}}(e),r=function(e){var t=[],a=[],o=[],n=_.orderBy(_.filter(_.map(_.groupBy(e,function(e){return e.LOBName.Title}),function(e,t,a){return{name:t,data:0}}),function(e){return"Energy Supply"!==e.name}),["name"],["asc"]),s=new Date;s=s.getFullYear();var i=null,r=null,l=null,d=null,m=null,c=null,u=[];e.forEach(function(e){new Date(e.DateIQUploaded),i=new Date(e.DateIQUploaded),r=new Date(e.DateComplete),e.Remediation_Needed,l=e.TSr_x0020_Status,d=e.Remediation_Status,m=new Date(e.Remediation_Date_Start),c=new Date(e.Remediation_Date_Complete),(i.getFullYear()===s||r.getFullYear()===s&&"Certificate/report  Valid"!==l||m.getFullYear()===s||c.getFullYear()===s||"Review Complete"!==l&&"Review Cancelled"!==l&&"On Hold"!==l&&"On Site Assessment Complete"!==l&&"No TSR Required"!==l&&"Certificate/report  Valid"!==l&&null!==l||"Review Complete"===l&&"Remediation Complete"!==d&&"Remediation Cancelled"!==d&&null!==d)&&("Review Complete"!==l&&"Review Cancelled"!==l&&"On Hold"!==l&&"On Site Assessment Complete"!==l&&"No TSR Required"!==l||"Review Complete"===l&&"Remediation Complete"!==d&&"Remediation Cancelled"!==d&&null!==d?(t.push(e),u.push(e.ID)):a.push(e),o.push(e))});var p={total:o.length};o=_.groupBy(o,function(e){return e.Tier}),o=_.mapKeys(o,function(e,t){return"Tier "+t}),_.has(o,"Tier 1")||(o["Tier 1"]=[]),_.has(o,"Tier 2")||(o["Tier 2"]=[]),_.has(o,"Tier 3")||(o["Tier 3"]=[]),_.has(o,"Tier 4")||(o["Tier 4"]=[]),o=_.mapValues(o,function(e,t,a){return{total:e.length,items:_.orderBy(_.unionWith(_.map(_.mapValues(_.groupBy(e,function(e){return e.LOBName.Title}),"length"),function(e,t,a){return{name:t,data:e}}),n,function(e,t){return e.name===t.name}),["name"],["asc"])}}),p.Data=o;var f={total:t.length};console.log(_.groupBy(t,function(e){return e.TSr_x0020_Status})),t=_.groupBy(t,function(e){return e.Tier}),t=_.mapKeys(t,function(e,t){return"Tier "+t}),_.has(t,"Tier 1")||(t["Tier 1"]=[],console.log("No Tier 1s found")),_.has(t,"Tier 2")||(t["Tier 2"]=[]),_.has(t,"Tier 3")||(t["Tier 3"]=[]),t=_.mapValues(t,function(e,t,a){return{total:e.length,items:_.orderBy(_.unionWith(_.map(_.mapValues(_.groupBy(e,function(e){return e.LOBName.Title}),"length"),function(e,t,a){return{name:t,data:e}}),n,function(e,t){return e.name===t.name}),["name"],["asc"])}}),f.Data=t;var h={total:a.length};return a=_.groupBy(a,function(e){return e.Tier}),a=_.mapKeys(a,function(e,t){return"Tier "+t}),_.has(a,"Tier 1")||(a["Tier 1"]=[]),_.has(a,"Tier 2")||(a["Tier 2"]=[]),_.has(a,"Tier 3")||(a["Tier 3"]=[]),_.has(a,"Tier 4")||(a["Tier 4"]=[]),a=_.mapValues(a,function(e,t,a){return{total:e.length,items:_.orderBy(_.unionWith(_.map(_.mapValues(_.groupBy(e,function(e){return e.LOBName.Title}),"length"),function(e,t,a){return{name:t,data:e}}),n,function(e,t){return e.name===t.name}),["name"],["asc"])}}),h.Data=a,{Active:f,Complete:h,Total:p}}(e);console.log(r),$("#Total_Active").text(i.active),$("#Total_Complete").text(i.complete),$("#Total_Review").text(i.review),$("#Total_Remediation").text(i.remediation);new Chart(document.getElementById("AggregateByTier").getContext("2d"),{type:"bar",data:{labels:i.completeByTier.map(function(e){return e.name}),datasets:[{label:"Complete",backgroundColor:"#3e95cd",data:i.completeByTier.map(function(e){return e.data})},{label:"Ongoing",backgroundColor:"#D6E9C6",borderColor:"RGB(0, 97, 0)",data:i.activeByTier.map(function(e){return e.data})}]},options:{title:{display:!0,text:"TSR's by Tier",fontSize:30,padding:20},tooltips:{titleFontSize:18,bodyFontSize:15,xPadding:10,yPadding:10},legend:{display:!0,position:"top",labels:{fontSize:16,fontStyle:"bold"}},animation:{onProgress:function(e){},onComplete:function(e){$("#AggregateByTier").siblings(".active").addClass("disabled").removeClass("active")}}}}),new Chart(document.getElementById("HighRiskByLOBPieChart").getContext("2d"),{type:"pie",data:{labels:_.orderBy(r.Total.Data["Tier 1"].items,["data"],["desc"]).map(function(e){return e.name}),datasets:[{backgroundColor:["#e6194B","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#42d4f4","#f032e6","#bfef45","#fabebe","#469990","#e6beff","800000"],data:_.orderBy(r.Total.Data["Tier 1"].items,["data"],["desc"]).map(function(e){return e.data})}]},options:{title:{display:!0,text:"All High Risk (Tier 1) TSR's by LOB",fontSize:30,padding:30},legend:{display:!0,position:"right",labels:{fontSize:16,fontStyle:"bold",usePointStyle:!0,generateLabels:function(e){var t=e.data;function a(e,t){return e+t}return t.labels.length&&t.datasets.length?t.labels.map(function(o,s){var i=e.getDatasetMeta(0),r=t.datasets[0],l=i.data[s],d=l&&l.custom||{},m=n.getValueAtIndexOrDefault,c=e.options.elements.arc,u=d.backgroundColor?d.backgroundColor:m(r.backgroundColor,s,c.backgroundColor),p=d.borderColor?d.borderColor:m(r.borderColor,s,c.borderColor),_=d.borderWidth?d.borderWidth:m(r.borderWidth,s,c.borderWidth);return{text:(r.data[s]/r.data.reduce(a)*100).toFixed(2)+" % : "+o,fillStyle:u,strokeStyle:p,lineWidth:_,hidden:isNaN(r.data[s])||i.data[s].hidden,index:s}}):[]}}},tooltips:{titleFontSize:30,bodyFontSize:20,xPadding:10,yPadding:10},animation:{onProgress:function(e){},onComplete:function(e){$("#HighRiskByLOBPieChart").siblings(".active").addClass("disabled").removeClass("active")}}}}),new Chart(document.getElementById("ActiveTSRByLOB").getContext("2d"),{type:"bar",data:{labels:r.Active.Data["Tier 1"].items.map(function(e){return e.name}),datasets:_.map(r.Active.Data,function(e,t,a){return{label:[t],data:e.items.map(function(e){return e.data}),backgroundColor:o[t].backgroundColor,borderColor:o[t].borderColor,borderWidth:1.5}}).reverse()},options:{aspectRatio:1.5,title:{display:!0,text:"Ongoing TSR's by LOB",fontSize:30,padding:20},legend:{display:!0,position:"right",labels:{fontSize:16,fontStyle:"bold"},reverse:!0},tooltips:{titleFontSize:18,bodyFontSize:15,xPadding:10,yPadding:10},scales:{yAxes:[{ticks:{beginAtZero:!0},stacked:!0}],xAxes:[{stacked:!0,ticks:{autoSkip:!1}}]},animation:{onProgress:function(e){},onComplete:function(e){$("#ActiveTSRByLOB").siblings(".active").addClass("disabled").removeClass("active")}}}}),new Chart(document.getElementById("CompleteTSRByLOB").getContext("2d"),{type:"bar",data:{labels:r.Complete.Data["Tier 1"].items.map(function(e){return e.name}),datasets:_.map(r.Complete.Data,function(e,t,a){return{label:[t],data:e.items.map(function(e){return e.data}),backgroundColor:o[t].backgroundColor,borderColor:o[t].borderColor,borderWidth:1.5}}).reverse()},options:{aspectRatio:1.5,title:{display:!0,text:"Complete TSR's by LOB",fontSize:30,padding:20},legend:{display:!0,position:"right",labels:{fontSize:16,fontStyle:"bold"},reverse:!0},tooltips:{titleFontSize:18,bodyFontSize:15,xPadding:10,yPadding:10},scales:{yAxes:[{ticks:{beginAtZero:!0},stacked:!0}],xAxes:[{stacked:!0,ticks:{autoSkip:!1}}]},animation:{onProgress:function(e){},onComplete:function(e){$("#CompleteTSRByLOB").siblings(".active").addClass("disabled").removeClass("active")}}}});var m=l(e,t),c=d(e,t);s.renderAllKPIs(m.total,m.byMonth,1,t);new Chart(document.getElementById("2019LineChartAllRequests").getContext("2d"),{type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{fill:!1,label:"TSR Requests",data:c.byMonth,borderColor:"#e6194B",backgroundColor:"#e6194B",lineTension:0}]},options:{responsive:!0,title:{display:!0,text:t+" TSR Requests by Month",fontSize:30,padding:30},legend:{display:!0,position:"top",labels:{fontSize:16,fontStyle:"bold"}},tooltips:{titleFontSize:22,bodyFontSize:18,xPadding:10,yPadding:10},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Month",fontSize:24}}],yAxes:[{ticks:{beginAtZero:!0},display:!0,scaleLabel:{display:!0,labelString:"TSR Requests",fontSize:24}}]},animation:{onProgress:function(e){},onComplete:function(e){$("#2019LineChartAllRequests").siblings(".active").addClass("disabled").removeClass("active")}}}}),new Chart(document.getElementById("2019LineChartRequestsByLOB").getContext("2d"),{type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:_.orderBy(c.byLOB,["data"],["desc"]).map(function(e){return e.name}).map(function(e){return{fill:!1,label:"Information Technology & Supply Chain"===e?"IT & Supply Chain":e,data:c.byLOBTime[e],borderColor:a[e],backgroundColor:a[e],lineTension:0}})},options:{aspectRatio:1.5,responsive:!0,title:{display:!0,text:t+" TSR Requests by LOB",fontSize:30,padding:30},legend:{display:!0,position:"right",labels:{fontSize:16,fontStyle:"bold"}},tooltips:{titleFontSize:22,bodyFontSize:18,xPadding:10,yPadding:10},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Month",fontSize:24}}],yAxes:[{ticks:{beginAtZero:!0},display:!0,scaleLabel:{display:!0,labelString:"TSR Requests",fontSize:24}}]},animation:{onProgress:function(e){},onComplete:function(e){$("#2019LineChartRequestsByLOB").siblings(".active").addClass("disabled").removeClass("active")}}}}),new Chart(document.getElementById("2019PieChartRequestsByLOB").getContext("2d"),{type:"pie",data:{labels:_.orderBy(c.byLOB,["data"],["desc"]).map(function(e){return"Information Technology & Supply Chain"===e.name?"IT & Supply Chain":e.name}),datasets:[{backgroundColor:_.orderBy(c.byLOB,["data"],["desc"]).map(function(e){return a[e.name]}),data:_.orderBy(c.byLOB,["data"],["desc"]).map(function(e){return e.data})}]},options:{title:{display:!0,text:t+" TSR Requests by LOB",fontSize:30,padding:30},legend:{display:!0,position:"right",labels:{fontSize:16,fontStyle:"bold",usePointStyle:!0,generateLabels:function(e){var t=e.data;function a(e,t){return e+t}return t.labels.length&&t.datasets.length?t.labels.map(function(o,s){var i=e.getDatasetMeta(0),r=t.datasets[0],l=i.data[s],d=l&&l.custom||{},m=n.getValueAtIndexOrDefault,c=e.options.elements.arc,u=d.backgroundColor?d.backgroundColor:m(r.backgroundColor,s,c.backgroundColor),p=d.borderColor?d.borderColor:m(r.borderColor,s,c.borderColor),_=d.borderWidth?d.borderWidth:m(r.borderWidth,s,c.borderWidth);return{text:(r.data[s]/r.data.reduce(a)*100).toFixed(2)+" % : "+o,fillStyle:u,strokeStyle:p,lineWidth:_,hidden:isNaN(r.data[s])||i.data[s].hidden,index:s}}):[]}}},tooltips:{titleFontSize:30,bodyFontSize:20,xPadding:10,yPadding:10},animation:{onProgress:function(e){},onComplete:function(e){$("#2019PieChartRequestsByLOB").siblings(".active").addClass("disabled").removeClass("active")}}}}),new Chart(document.getElementById("2019BarChartRequestsByLOB").getContext("2d"),{type:"bar",data:{labels:c.byTier["Tier 1"].items.map(function(e){return e.name}),datasets:_.map(c.byTier,function(e,t,a){return{label:[t],data:e.items.map(function(e){return e.data}),backgroundColor:o[t].backgroundColor,borderColor:o[t].borderColor,borderWidth:1.5}}).reverse()},options:{aspectRatio:1.5,title:{display:!0,text:t+" TSR Requests by Tier",fontSize:30,padding:20},legend:{display:!0,position:"right",labels:{fontSize:16,fontStyle:"bold"},reverse:!0},tooltips:{titleFontSize:18,bodyFontSize:15,xPadding:10,yPadding:10},scales:{yAxes:[{ticks:{beginAtZero:!0},stacked:!0}],xAxes:[{stacked:!0,ticks:{autoSkip:!1}}]},animation:{onProgress:function(e){},onComplete:function(e){$("#2019BarChartRequestsByLOB").siblings(".active").addClass("disabled").removeClass("active")}}}});var u=l(e,t-1),p=d(e,t-1);s.renderAllKPIs(u.total,u.byMonth,2,t-1);new Chart(document.getElementById("2018LineChartAllRequests").getContext("2d"),{type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{fill:!1,label:"TSR Requests",data:p.byMonth,borderColor:"#e6194B",backgroundColor:"#e6194B",lineTension:0}]},options:{responsive:!0,title:{display:!0,text:t-1+" TSR Requests",fontSize:30,padding:30},legend:{display:!0,position:"top",labels:{fontSize:16,fontStyle:"bold"}},tooltips:{titleFontSize:22,bodyFontSize:18,xPadding:10,yPadding:10},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Month",fontSize:24}}],yAxes:[{ticks:{beginAtZero:!0},display:!0,scaleLabel:{display:!0,labelString:"TSR Requests",fontSize:24}}]},animation:{onProgress:function(e){},onComplete:function(e){$("#2018LineChartAllRequests").siblings(".active").addClass("disabled").removeClass("active")}}}}),new Chart(document.getElementById("2018LineChartRequestsByLOB").getContext("2d"),{type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:_.orderBy(p.byLOB,["data"],["desc"]).map(function(e){return e.name}).map(function(e){return{fill:!1,label:"Information Technology & Supply Chain"===e?"IT & Supply Chain":e,data:p.byLOBTime[e],borderColor:a[e],backgroundColor:a[e],lineTension:0}})},options:{aspectRatio:1.5,responsive:!0,title:{display:!0,text:t-1+" TSR Requests by LOB",fontSize:30,padding:30},legend:{display:!0,position:"right",labels:{fontSize:16,fontStyle:"bold"}},tooltips:{titleFontSize:22,bodyFontSize:18,xPadding:10,yPadding:10},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Month",fontSize:24}}],yAxes:[{ticks:{beginAtZero:!0},display:!0,scaleLabel:{display:!0,labelString:"TSR Requests",fontSize:24}}]},animation:{onProgress:function(e){},onComplete:function(e){$("#2018LineChartRequestsByLOB").siblings(".active").addClass("disabled").removeClass("active")}}}}),new Chart(document.getElementById("2018PieChartRequestsByLOB").getContext("2d"),{type:"pie",data:{labels:_.orderBy(p.byLOB,["data"],["desc"]).map(function(e){return"Information Technology & Supply Chain"===e.name?"IT & Supply Chain":e.name}),datasets:[{backgroundColor:_.orderBy(p.byLOB,["data"],["desc"]).map(function(e){return a[e.name]}),data:_.orderBy(p.byLOB,["data"],["desc"]).map(function(e){return e.data})}]},options:{title:{display:!0,text:t-1+" TSR Requests by LOB",fontSize:30,padding:30},legend:{display:!0,position:"right",labels:{fontSize:16,fontStyle:"bold",usePointStyle:!0,generateLabels:function(e){var t=e.data;function a(e,t){return e+t}return t.labels.length&&t.datasets.length?t.labels.map(function(o,s){var i=e.getDatasetMeta(0),r=t.datasets[0],l=i.data[s],d=l&&l.custom||{},m=n.getValueAtIndexOrDefault,c=e.options.elements.arc,u=d.backgroundColor?d.backgroundColor:m(r.backgroundColor,s,c.backgroundColor),p=d.borderColor?d.borderColor:m(r.borderColor,s,c.borderColor),_=d.borderWidth?d.borderWidth:m(r.borderWidth,s,c.borderWidth);return{text:(r.data[s]/r.data.reduce(a)*100).toFixed(2)+" % : "+o,fillStyle:u,strokeStyle:p,lineWidth:_,hidden:isNaN(r.data[s])||i.data[s].hidden,index:s}}):[]}}},tooltips:{titleFontSize:30,bodyFontSize:20,xPadding:10,yPadding:10},animation:{onProgress:function(e){},onComplete:function(e){$("#2018PieChartRequestsByLOB").siblings(".active").addClass("disabled").removeClass("active")}}}}),new Chart(document.getElementById("2018BarChartRequestsByLOB").getContext("2d"),{type:"bar",data:{labels:p.byTier["Tier 1"].items.map(function(e){return e.name}),datasets:_.map(p.byTier,function(e,t,a){return{label:[t],data:e.items.map(function(e){return e.data}),backgroundColor:o[t].backgroundColor,borderColor:o[t].borderColor,borderWidth:1.5}}).reverse()},options:{aspectRatio:1.5,title:{display:!0,text:t-1+" TSR Requests by Tier",fontSize:30,padding:20},legend:{display:!0,position:"right",labels:{fontSize:16,fontStyle:"bold"},reverse:!0},tooltips:{titleFontSize:18,bodyFontSize:15,xPadding:10,yPadding:10},scales:{yAxes:[{ticks:{beginAtZero:!0},stacked:!0}],xAxes:[{stacked:!0,ticks:{autoSkip:!1}}]},animation:{onProgress:function(e){},onComplete:function(e){$("#2018BarChartRequestsByLOB").siblings(".active").addClass("disabled").removeClass("active")}}}});var f=l(e,t-2),h=d(e,t-2);s.renderAllKPIs(f.total,f.byMonth,3,t-2);new Chart(document.getElementById("2017LineChartAllRequests").getContext("2d"),{type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{fill:!1,label:"TSR Requests",data:h.byMonth,borderColor:"#e6194B",backgroundColor:"#e6194B",lineTension:0}]},options:{responsive:!0,title:{display:!0,text:t-2+" TSR Requests",fontSize:30,padding:30},legend:{display:!0,position:"top",labels:{fontSize:16,fontStyle:"bold"}},tooltips:{titleFontSize:22,bodyFontSize:18,xPadding:10,yPadding:10},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Month",fontSize:24}}],yAxes:[{ticks:{beginAtZero:!0},display:!0,scaleLabel:{display:!0,labelString:"TSR Requests",fontSize:24}}]},animation:{onProgress:function(e){},onComplete:function(e){$("#2017LineChartAllRequests").siblings(".active").addClass("disabled").removeClass("active")}}}}),new Chart(document.getElementById("2017LineChartRequestsByLOB").getContext("2d"),{type:"line",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:_.orderBy(h.byLOB,["data"],["desc"]).map(function(e){return e.name}).map(function(e){return{fill:!1,label:"Information Technology & Supply Chain"===e?"IT & Supply Chain":e,data:h.byLOBTime[e],borderColor:a[e],backgroundColor:a[e],lineTension:0}})},options:{aspectRatio:1.5,responsive:!0,title:{display:!0,text:t-2+" TSR Requests by LOB",fontSize:30,padding:30},legend:{display:!0,position:"right",labels:{fontSize:16,fontStyle:"bold"}},tooltips:{titleFontSize:22,bodyFontSize:18,xPadding:10,yPadding:10},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Month",fontSize:24}}],yAxes:[{ticks:{beginAtZero:!0},display:!0,scaleLabel:{display:!0,labelString:"TSR Requests",fontSize:24}}]},animation:{onProgress:function(e){},onComplete:function(e){$("#2017LineChartRequestsByLOB").siblings(".active").addClass("disabled").removeClass("active")}}}}),new Chart(document.getElementById("2017PieChartRequestsByLOB").getContext("2d"),{type:"pie",data:{labels:_.orderBy(h.byLOB,["data"],["desc"]).map(function(e){return"Information Technology & Supply Chain"===e.name?"IT & Supply Chain":e.name}),datasets:[{backgroundColor:_.orderBy(h.byLOB,["data"],["desc"]).map(function(e){return a[e.name]}),data:_.orderBy(h.byLOB,["data"],["desc"]).map(function(e){return e.data})}]},options:{title:{display:!0,text:t-2+" TSR Requests by LOB",fontSize:30,padding:30},legend:{display:!0,position:"right",labels:{fontSize:16,fontStyle:"bold",usePointStyle:!0,generateLabels:function(e){var t=e.data;function a(e,t){return e+t}return t.labels.length&&t.datasets.length?t.labels.map(function(o,s){var i=e.getDatasetMeta(0),r=t.datasets[0],l=i.data[s],d=l&&l.custom||{},m=n.getValueAtIndexOrDefault,c=e.options.elements.arc,u=d.backgroundColor?d.backgroundColor:m(r.backgroundColor,s,c.backgroundColor),p=d.borderColor?d.borderColor:m(r.borderColor,s,c.borderColor),_=d.borderWidth?d.borderWidth:m(r.borderWidth,s,c.borderWidth);return{text:(r.data[s]/r.data.reduce(a)*100).toFixed(2)+" % : "+o,fillStyle:u,strokeStyle:p,lineWidth:_,hidden:isNaN(r.data[s])||i.data[s].hidden,index:s}}):[]}}},tooltips:{titleFontSize:30,bodyFontSize:20,xPadding:10,yPadding:10},animation:{onProgress:function(e){},onComplete:function(e){$("#2017PieChartRequestsByLOB").siblings(".active").addClass("disabled").removeClass("active")}}}}),new Chart(document.getElementById("2017BarChartRequestsByLOB").getContext("2d"),{type:"bar",data:{labels:h.byTier["Tier 1"].items.map(function(e){return e.name}),datasets:_.map(h.byTier,function(e,t,a){return{label:[t],data:e.items.map(function(e){return e.data}),backgroundColor:o[t].backgroundColor,borderColor:o[t].borderColor,borderWidth:1.5}}).reverse()},options:{aspectRatio:1.5,title:{display:!0,text:t-2+" TSR Requests by Tier",fontSize:30,padding:20},legend:{display:!0,position:"right",labels:{fontSize:16,fontStyle:"bold"},reverse:!0},tooltips:{titleFontSize:18,bodyFontSize:15,xPadding:10,yPadding:10},scales:{yAxes:[{ticks:{beginAtZero:!0},stacked:!0}],xAxes:[{stacked:!0,ticks:{autoSkip:!1}}]},animation:{onProgress:function(e){},onComplete:function(e){$("#2017BarChartRequestsByLOB").siblings(".active").addClass("disabled").removeClass("active")}}}})})}}}(n,s);$(document).ready(function(){i.initialize(),i.setTables(),i.loadAllTableData(),i.setButtons(),i.setReport()})},function(e,t,a){},,function(e,t,a){}]);